<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Microservices Architecture: A Complete Guide to Best Practices</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            color: #333;
        }
        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 10px;
        }
        .section {
            margin-bottom: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #007bff;
        }
        .best-practice {
            background: #e8f5e8;
            border-left: 4px solid #28a745;
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
        }
        .code-block {
            background: #f4f4f4;
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 15px;
            margin: 10px 0;
            overflow-x: auto;
        }
        .pros-cons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        .pros, .cons {
            padding: 15px;
            border-radius: 8px;
        }
        .pros {
            background: #d4edda;
            border: 1px solid #c3e6cb;
        }
        .cons {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
        }
        h1, h2, h3 {
            color: #2c3e50;
        }
        ul, ol {
            padding-left: 20px;
        }
        .architecture-diagram {
            text-align: center;
            margin: 20px 0;
            padding: 20px;
            background: #fff;
            border: 2px dashed #007bff;
            border-radius: 10px;
        }

        /* Dynamic Visual Diagrams Styles */
        .interactive-diagram {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            padding: 30px;
            border-radius: 20px;
            margin: 30px 0;
            border: 3px solid #dee2e6;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .interactive-diagram h3 {
            text-align: center;
            margin-bottom: 25px;
            color: #2c3e50;
            font-size: 1.5em;
        }

        .control-panel {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(255,255,255,0.9);
            border-radius: 15px;
            flex-wrap: wrap;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
        }

        .control-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            font-size: 14px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            min-width: 140px;
        }

        .control-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
        }

        .control-btn.active {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            transform: translateY(-2px);
        }

        .architecture-btn {
            font-weight: bold;
            min-width: 180px;
        }

        .divider {
            width: 2px;
            height: 30px;
            background: #dee2e6;
            margin: 0 10px;
        }

        .architecture-container {
            position: relative;
            min-height: 600px;
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: inset 0 2px 10px rgba(0,0,0,0.05);
            margin-bottom: 25px;
        }

        .architecture-view {
            position: relative;
            width: 100%;
            height: 100%;
        }

        .architecture-view h4 {
            text-align: center;
            margin-bottom: 30px;
            color: #2c3e50;
            font-size: 1.4em;
            padding: 10px 20px;
            border-radius: 25px;
            display: inline-block;
            margin-left: 50%;
            transform: translateX(-50%);
        }

        #monolithView h4 {
            background: linear-gradient(135deg, #ffeaa7 0%, #fab1a0 100%);
            color: #2c3e50;
        }

        #microservicesView h4 {
            background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%);
            color: white;
        }

        /* Architecture Layout */
        .monolith-diagram, .microservices-diagram {
            display: flex;
            flex-direction: column;
            gap: 40px;
            align-items: center;
            position: relative;
            min-height: 500px;
        }

        .arch-layer {
            display: flex;
            justify-content: space-around;
            width: 100%;
            align-items: center;
            position: relative;
        }

        .arch-node {
            background: white;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 6px 20px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            cursor: pointer;
            border: 3px solid transparent;
            min-width: 140px;
        }

        .arch-node:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 30px rgba(0,0,0,0.2);
        }

        .arch-node.active {
            border-color: #28a745;
            background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%);
            transform: translateY(-8px) scale(1.05);
        }

        /* Client Nodes */
        .client-node {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        /* Load Balancer */
        .lb-node {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%);
            color: white;
        }

        /* Monolith App */
        .monolith-app {
            background: linear-gradient(135deg, #ffeaa7 0%, #fab1a0 100%);
            color: #2c3e50;
            min-width: 400px;
            max-width: 500px;
        }

        .app-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid rgba(255,255,255,0.3);
        }

        .app-icon {
            font-size: 2em;
        }

        .app-title {
            font-weight: bold;
            font-size: 1.2em;
        }

        .app-status {
            background: rgba(255,255,255,0.8);
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: 500;
        }

        .app-modules {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .module-row {
            display: flex;
            gap: 10px;
        }

        .module {
            flex: 1;
            background: rgba(255,255,255,0.9);
            padding: 12px;
            border-radius: 10px;
            font-weight: 500;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .module.active {
            border-color: #00b894;
            background: linear-gradient(135deg, #00b894 0%, #55efc4 100%);
            color: white;
            transform: scale(1.05);
        }

        /* Gateway Node */
        .gateway-node {
            background: linear-gradient(135deg, #00b894 0%, #55efc4 100%);
            color: white;
            min-width: 200px;
        }

        .gateway-features {
            display: flex;
            justify-content: space-around;
            margin: 15px 0;
        }

        .feature-badge {
            background: rgba(255,255,255,0.2);
            padding: 8px;
            border-radius: 8px;
            font-size: 1.2em;
            transition: all 0.3s ease;
        }

        .feature-badge.active {
            background: rgba(255,255,255,0.4);
            transform: scale(1.2);
            animation: badgePulse 0.5s ease-in-out;
        }

        @keyframes badgePulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        /* Service Nodes */
        .service-node {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            min-width: 160px;
        }

        .service-header {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-bottom: 10px;
        }

        .service-icon {
            font-size: 1.5em;
        }

        .service-name {
            font-weight: bold;
            font-size: 1.1em;
        }

        .service-status {
            background: rgba(255,255,255,0.2);
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.9em;
            margin-bottom: 10px;
        }

        .service-instances {
            display: flex;
            justify-content: center;
            gap: 5px;
        }

        .instance-dot {
            width: 8px;
            height: 8px;
            background: rgba(255,255,255,0.3);
            border-radius: 50%;
            transition: all 0.3s ease;
        }

        .instance-dot.active {
            background: #ffc107;
            animation: instancePulse 2s infinite;
        }

        @keyframes instancePulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.6; transform: scale(1.3); }
        }

        /* Message Queue */
        .message-node {
            background: linear-gradient(135deg, #a29bfe 0%, #6c5ce7 100%);
            color: white;
        }

        /* Database Nodes */
        .database-node {
            background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%);
            color: white;
            min-width: 120px;
        }

        .db-tables {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 5px;
            margin-top: 10px;
        }

        .table-item {
            background: rgba(255,255,255,0.2);
            padding: 4px 8px;
            border-radius: 6px;
            font-size: 0.8em;
        }

        .db-icon, .node-icon {
            font-size: 1.8em;
            margin-bottom: 5px;
        }

        .node-label, .db-name {
            font-weight: bold;
            margin-bottom: 3px;
        }

        .node-desc, .db-type {
            font-size: 0.8em;
            opacity: 0.9;
        }

        /* Connection Arrows */
        .connection-arrow {
            position: absolute;
            width: 4px;
            background: linear-gradient(180deg, #667eea 0%, #764ba2 100%);
            border-radius: 2px;
            opacity: 0.6;
            transition: all 0.3s ease;
            z-index: 1;
        }

        .connection-arrow.active {
            opacity: 1;
            animation: arrowFlow 2s ease-in-out infinite;
        }

        @keyframes arrowFlow {
            0%, 100% { opacity: 0.6; transform: scaleY(1); }
            50% { opacity: 1; transform: scaleY(1.1); }
        }

        /* Traffic Animation */
        .traffic-dot {
            position: absolute;
            width: 12px;
            height: 12px;
            background: #ff6b6b;
            border-radius: 50%;
            opacity: 0;
            z-index: 10;
            box-shadow: 0 0 10px rgba(255,107,107,0.6);
            transition: all 0.3s ease;
        }

        .traffic-dot.active {
            opacity: 1;
            animation: trafficFlow 4s ease-in-out infinite;
        }

        @keyframes trafficFlow {
            0% { transform: scale(1); opacity: 1; }
            25% { transform: scale(1.3); opacity: 0.8; }
            50% { transform: scale(1); opacity: 1; }
            75% { transform: scale(1.3); opacity: 0.8; }
            100% { transform: scale(1); opacity: 1; }
        }

        /* Information Panel */
        .architecture-info-panel {
            background: rgba(255,255,255,0.95);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            margin-bottom: 25px;
        }

        .info-content h4 {
            margin: 0 0 15px 0;
            color: #2c3e50;
        }

        .info-content ul {
            margin: 15px 0;
            padding-left: 20px;
        }

        .info-content li {
            margin: 8px 0;
            color: #495057;
        }

        /* Comparison Grid */
        .comparison-grid {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }

        .comparison-header {
            grid-column: 1 / -1;
            text-align: center;
        }

        .comparison-header h4 {
            margin: 0;
            color: #2c3e50;
        }

        .comparison-item {
            background: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }

        .comparison-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }

        .monolith-item {
            border-left: 4px solid #fab1a0;
        }

        .microservices-item {
            border-left: 4px solid #74b9ff;
        }

        .comparison-icon {
            font-size: 2em;
            margin-bottom: 10px;
        }

        .comparison-title {
            font-weight: bold;
            margin-bottom: 8px;
            color: #2c3e50;
        }

        .comparison-desc {
            font-size: 0.9em;
            color: #6c757d;
        }

        /* Components Grid */
        .components-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 25px 0;
        }

        .component-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            border-top: 4px solid #667eea;
        }

        .component-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 12px 30px rgba(0,0,0,0.15);
        }

        .component-icon {
            font-size: 2.5em;
            margin-bottom: 15px;
        }

        .component-card h4 {
            margin: 0 0 15px 0;
            color: #2c3e50;
        }

        .component-card p {
            color: #6c757d;
            line-height: 1.5;
            margin: 0;
        }

        /* Mobile Responsiveness */
        @media (max-width: 768px) {
            .control-panel {
                flex-direction: column;
                gap: 10px;
            }
            
            .divider {
                width: 100%;
                height: 2px;
                margin: 10px 0;
            }
            
            .arch-layer {
                flex-direction: column;
                gap: 20px;
            }
            
            .monolith-app {
                min-width: auto;
                max-width: 350px;
            }
            
            .module-row {
                flex-direction: column;
            }
            
            .comparison-grid {
                grid-template-columns: 1fr;
            }
            
            .components-grid {
                grid-template-columns: 1fr;
            }
        }

        /* New Styles for Architecture Comparison */
        .architecture-comparison {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin: 30px 0;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }

        .comparison-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .comparison-header h4 {
            margin: 0 0 10px 0;
            color: #2c3e50;
            font-size: 1.8em;
        }

        .comparison-header p {
            color: #6c757d;
            font-size: 1.1em;
            margin: 0;
        }

        /* Comparison Table */
        .comparison-table {
            display: grid;
            grid-template-columns: 200px 1fr 1fr;
            gap: 2px;
            background: #dee2e6;
            border-radius: 15px;
            overflow: hidden;
            margin-bottom: 40px;
        }

        .comparison-row {
            display: contents;
            transition: all 0.3s ease;
        }

        .comparison-row.hidden {
            display: none;
        }

        .header-row .aspect-column,
        .header-row .monolith-column,
        .header-row .microservices-column {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            text-align: center;
            font-weight: bold;
        }

        .aspect-column {
            background: #f8f9fa;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            color: #2c3e50;
        }

        .aspect-icon {
            font-size: 2em;
            margin-bottom: 10px;
        }

        .aspect-title {
            font-weight: bold;
            font-size: 1.1em;
        }

        .monolith-column, .microservices-column {
            background: white;
            padding: 20px;
            color: #2c3e50;
        }

        .monolith-column {
            border-left: 4px solid #fab1a0;
        }

        .microservices-column {
            border-left: 4px solid #74b9ff;
        }

        .arch-icon {
            font-size: 2em;
            margin-bottom: 8px;
        }

        .arch-title {
            font-size: 1.2em;
            font-weight: bold;
        }

        .feature-item {
            display: flex;
            align-items: center;
            margin: 12px 0;
            padding: 8px 0;
            font-size: 0.95em;
            line-height: 1.4;
        }

        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 12px;
            flex-shrink: 0;
        }

        .status-indicator.positive {
            color: #28a745;
        }

        .status-indicator.negative {
            color: #dc3545;
        }

        .status-indicator.neutral {
            color: #ffc107;
        }

        /* Comparison Summary */
        .comparison-summary {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 40px;
        }

        .summary-section h5 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.3em;
            text-align: center;
        }

        .scenario-cards {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .scenario-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            display: flex;
            align-items: center;
            gap: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .scenario-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }

        .monolith-card {
            border-left: 4px solid #fab1a0;
        }

        .monolith-card:hover {
            background: linear-gradient(135deg, #ffeaa7 0%, #fab1a0 100%);
            color: white;
        }

        .microservices-card {
            border-left: 4px solid #74b9ff;
        }

        .microservices-card:hover {
            background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%);
            color: white;
        }

        .scenario-icon {
            font-size: 2em;
            flex-shrink: 0;
        }

        .scenario-content {
            flex: 1;
        }

        .scenario-title {
            font-weight: bold;
            margin-bottom: 5px;
            font-size: 1.1em;
        }

        .scenario-desc {
            font-size: 0.9em;
            opacity: 0.9;
        }

        /* Comparison Filters */
        .comparison-filters {
            text-align: center;
        }

        .comparison-filters h5 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.3em;
        }

        .filter-buttons {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
        }

        .filter-btn {
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            color: #6c757d;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9em;
            font-weight: 500;
        }

        .filter-btn:hover {
            background: #e9ecef;
            border-color: #adb5bd;
            transform: translateY(-2px);
        }

        .filter-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-color: transparent;
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        /* Enhanced Animation for filtering */
        .comparison-row {
            opacity: 1;
            transform: scale(1);
            transition: opacity 0.3s ease, transform 0.3s ease;
        }

        .comparison-row.filtering-out {
            opacity: 0;
            transform: scale(0.95);
        }

        .comparison-row.filtering-in {
            opacity: 1;
            transform: scale(1);
        }

        /* Filter button enhancements */
        .filter-btn {
            position: relative;
            overflow: hidden;
        }

        .filter-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }

        .filter-btn:hover::before {
            left: 100%;
        }

        .filter-btn.active {
            position: relative;
        }

        .filter-btn.active::after {
            content: '‚úì';
            position: absolute;
            top: 50%;
            right: 8px;
            transform: translateY(-50%);
            font-size: 0.8em;
        }

        /* Smooth transitions for comparison header */
        .comparison-header p {
            transition: opacity 0.3s ease;
        }

        /* Loading state for filters */
        .filter-buttons.loading .filter-btn {
            pointer-events: none;
            opacity: 0.7;
        }

        /* Mobile responsiveness for filters */
        @media (max-width: 768px) {
            .filter-buttons {
                flex-direction: column;
                align-items: center;
                gap: 8px;
            }
            
            .filter-btn {
                width: 90%;
                max-width: 250px;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Microservices Architecture: A Complete Guide</h1>
        <p>Best Practices, Patterns, and Implementation Strategies</p>
        <small>Published: June 21, 2025</small>
    </div>

    <div class="section">
        <h2>üìñ Table of Contents</h2>
        <ol>
            <li><a href="#introduction">Introduction to Microservices</a></li>
            <li><a href="#architecture">Microservices Architecture</a></li>
            <li><a href="#benefits">Benefits and Challenges</a></li>
            <li><a href="#best-practices">Best Practices</a></li>
            <li><a href="#patterns">Design Patterns</a></li>
            <li><a href="#technologies">Technology Stack</a></li>
            <li><a href="#implementation">Implementation Guide</a></li>
            <li><a href="#migration">Migration from Monolith</a></li>
            <li><a href="#monitoring">Monitoring and Observability</a></li>
            <li><a href="#conclusion">Conclusion</a></li>
        </ol>
    </div>

    <div class="section" id="introduction">
        <h2>üöÄ Introduction to Microservices</h2>
        <p>Microservices architecture is a software development approach that structures an application as a collection of loosely coupled, independently deployable services. Each service is fine-grained and implements a specific business capability.</p>
        
        <h3>What Are Microservices?</h3>
        <p>Microservices break down a large application into smaller, manageable pieces that:</p>
        <ul>
            <li>Run in their own process</li>
            <li>Communicate via well-defined APIs</li>
            <li>Can be developed, deployed, and scaled independently</li>
            <li>Are organized around business capabilities</li>
            <li>Can use different technologies and databases</li>
        </ul>
    </div>

    <div class="section" id="architecture">
        <h2>üèóÔ∏è Microservices Architecture</h2>
        
        <div class="interactive-diagram">
            <h3>üîÑ Interactive Architecture Comparison</h3>
            
            <!-- Architecture Toggle Controls -->
            <div class="control-panel">
                <button id="showMonolithBtn" class="control-btn architecture-btn">üè¢ Show Monolith</button>
                <button id="showMicroservicesBtn" class="control-btn architecture-btn active">üîß Show Microservices</button>
                <div class="divider"></div>
                <button id="startTrafficBtn" class="control-btn">‚ñ∂Ô∏è Start Traffic</button>
                <button id="stopTrafficBtn" class="control-btn">‚èπÔ∏è Stop Traffic</button>
                <button id="resetArchBtn" class="control-btn">üîÑ Reset</button>
            </div>
            
            <!-- Architecture Display Container -->
            <div class="architecture-container">
                <!-- Monolithic Architecture View -->
                <div id="monolithView" class="architecture-view" style="display: none;">
                    <h4>üè¢ Monolithic Architecture</h4>
                    <div class="monolith-diagram">
                        <!-- Client -->
                        <div class="arch-layer client-layer">
                            <div class="arch-node client-node" id="monolithClient">
                                <div class="node-icon">üë•</div>
                                <div class="node-label">Web Clients</div>
                                <div class="node-desc">Browser, Mobile App</div>
                            </div>
                        </div>
                        
                        <!-- Load Balancer -->
                        <div class="arch-layer lb-layer">
                            <div class="arch-node lb-node" id="monolithLB">
                                <div class="node-icon">‚öñÔ∏è</div>
                                <div class="node-label">Load Balancer</div>
                                <div class="node-desc">Nginx, HAProxy</div>
                            </div>
                        </div>
                        
                        <!-- Monolithic Application -->
                        <div class="arch-layer app-layer">
                            <div class="arch-node monolith-app" id="monolithApp">
                                <div class="app-header">
                                    <div class="app-icon">üè¢</div>
                                    <div class="app-title">E-Commerce Monolith</div>
                                    <div class="app-status" id="monolithStatus">Ready</div>
                                </div>
                                <div class="app-modules">
                                    <div class="module-row">
                                        <div class="module" id="monolithUser">üë§ User Module</div>
                                        <div class="module" id="monolithProduct">üì¶ Product Module</div>
                                    </div>
                                    <div class="module-row">
                                        <div class="module" id="monolithOrder">üõí Order Module</div>
                                        <div class="module" id="monolithPayment">üí≥ Payment Module</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Database -->
                        <div class="arch-layer db-layer">
                            <div class="arch-node database-node" id="monolithDB">
                                <div class="node-icon">üóÑÔ∏è</div>
                                <div class="node-label">Shared Database</div>
                                <div class="db-tables">
                                    <div class="table-item">users</div>
                                    <div class="table-item">products</div>
                                    <div class="table-item">orders</div>
                                    <div class="table-item">payments</div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Connection arrows -->
                        <div class="connection-arrow" id="clientToLB"></div>
                        <div class="connection-arrow" id="lbToApp"></div>
                        <div class="connection-arrow" id="appToDB"></div>
                        
                        <!-- Traffic dots -->
                        <div class="traffic-dot" id="monolithDot1"></div>
                        <div class="traffic-dot" id="monolithDot2"></div>
                    </div>
                </div>
                
                <!-- Microservices Architecture View -->
                <div id="microservicesView" class="architecture-view">
                    <h4>üîß Microservices Architecture</h4>
                    <div class="microservices-diagram">
                        <!-- Client Layer -->
                        <div class="arch-layer client-layer">
                            <div class="arch-node client-node" id="microClient">
                                <div class="node-icon">üë•</div>
                                <div class="node-label">Web Clients</div>
                                <div class="node-desc">Browser, Mobile App</div>
                            </div>
                        </div>
                        
                        <!-- API Gateway Layer -->
                        <div class="arch-layer gateway-layer">
                            <div class="arch-node gateway-node" id="microGateway">
                                <div class="node-icon">üö™</div>
                                <div class="node-label">API Gateway</div>
                                <div class="gateway-features">
                                    <span class="feature-badge" id="authBadge">üîê</span>
                                    <span class="feature-badge" id="rateBadge">‚è±Ô∏è</span>
                                    <span class="feature-badge" id="routeBadge">üéØ</span>
                                    <span class="feature-badge" id="logBadge">üìù</span>
                                </div>
                                <div class="node-status" id="gatewayStatus">Ready</div>
                            </div>
                        </div>
                        
                        <!-- Microservices Layer -->
                        <div class="arch-layer services-layer">
                            <div class="arch-node service-node" id="userService" data-service="user">
                                <div class="service-header">
                                    <div class="service-icon">üë§</div>
                                    <div class="service-name">User Service</div>
                                </div>
                                <div class="service-status">Ready</div>
                                <div class="service-instances">
                                    <div class="instance-dot active"></div>
                                    <div class="instance-dot active"></div>
                                </div>
                            </div>
                            
                            <div class="arch-node service-node" id="productService" data-service="product">
                                <div class="service-header">
                                    <div class="service-icon">üì¶</div>
                                    <div class="service-name">Product Service</div>
                                </div>
                                <div class="service-status">Ready</div>
                                <div class="service-instances">
                                    <div class="instance-dot active"></div>
                                    <div class="instance-dot active"></div>
                                    <div class="instance-dot active"></div>
                                </div>
                            </div>
                            
                            <div class="arch-node service-node" id="orderService" data-service="order">
                                <div class="service-header">
                                    <div class="service-icon">üõí</div>
                                    <div class="service-name">Order Service</div>
                                </div>
                                <div class="service-status">Ready</div>
                                <div class="service-instances">
                                    <div class="instance-dot active"></div>
                                    <div class="instance-dot active"></div>
                                </div>
                            </div>
                            
                            <div class="arch-node service-node" id="paymentService" data-service="payment">
                                <div class="service-header">
                                    <div class="service-icon">üí≥</div>
                                    <div class="service-name">Payment Service</div>
                                </div>
                                <div class="service-status">Ready</div>
                                <div class="service-instances">
                                    <div class="instance-dot active"></div>
                                    <div class="instance-dot active"></div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Message Queue Layer -->
                        <div class="arch-layer message-layer">
                            <div class="arch-node message-node" id="messageQueue">
                                <div class="node-icon">üì¨</div>
                                <div class="node-label">Message Queue</div>
                                <div class="node-desc">Event Bus, Kafka</div>
                            </div>
                        </div>
                        
                        <!-- Database Layer -->
                        <div class="arch-layer db-layer">
                            <div class="arch-node database-node" id="userDB">
                                <div class="db-icon">üóÑÔ∏è</div>
                                <div class="db-name">User DB</div>
                                <div class="db-type">PostgreSQL</div>
                            </div>
                            <div class="arch-node database-node" id="productDB">
                                <div class="db-icon">üóÑÔ∏è</div>
                                <div class="db-name">Product DB</div>
                                <div class="db-type">MongoDB</div>
                            </div>
                            <div class="arch-node database-node" id="orderDB">
                                <div class="db-icon">üóÑÔ∏è</div>
                                <div class="db-name">Order DB</div>
                                <div class="db-type">MySQL</div>
                            </div>
                            <div class="arch-node database-node" id="paymentDB">
                                <div class="db-icon">üóÑÔ∏è</div>
                                <div class="db-name">Payment DB</div>
                                <div class="db-type">PostgreSQL</div>
                            </div>
                        </div>
                        
                        <!-- Connection arrows -->
                        <div class="connection-arrow" id="clientToGateway"></div>
                        <div class="connection-arrow" id="gatewayToServices"></div>
                        <div class="connection-arrow" id="servicesToMessage"></div>
                        <div class="connection-arrow" id="servicesToDB"></div>
                        
                        <!-- Traffic dots -->
                        <div class="traffic-dot" id="microDot1"></div>
                        <div class="traffic-dot" id="microDot2"></div>
                        <div class="traffic-dot" id="microDot3"></div>
                        <div class="traffic-dot" id="microDot4"></div>
                    </div>
                </div>
            </div>
            
            <!-- Interactive Information Panel -->
            <div class="architecture-info-panel" id="architectureInfoPanel">
                <div class="info-content" id="architectureInfo">
                    <h4>üîß Microservices Architecture</h4>
                    <p><strong>Current View:</strong> Distributed system with independent services</p>
                    <ul>
                        <li>Each service has its own database</li>
                        <li>Services communicate via API Gateway</li>
                        <li>Event-driven communication through message queue</li>
                        <li>Independent scaling and deployment</li>
                    </ul>
                    <p><em>üëÜ Click services above to learn more, or start traffic to see data flow!</em></p>
                </div>
            </div>
            
            <!-- Architecture Comparison - Replace the existing comparison-grid section -->
            <div class="architecture-comparison">
                <div class="comparison-header">
                    <h4>‚öñÔ∏è Architecture Comparison</h4>
                    <p>Understanding the key differences between Monolithic and Microservices architectures</p>
                </div>
                
                <!-- Detailed Comparison Table -->
                <div class="comparison-table">
                    <div class="comparison-row header-row">
                        <div class="aspect-column">Aspect</div>
                        <div class="monolith-column">
                            <div class="arch-icon">üè¢</div>
                            <div class="arch-title">Monolithic Architecture</div>
                        </div>
                        <div class="microservices-column">
                            <div class="arch-icon">üîß</div>
                            <div class="arch-title">Microservices Architecture</div>
                        </div>
                    </div>
                    
                    <div class="comparison-row" data-category="deployment">
                        <div class="aspect-column">
                            <div class="aspect-icon">üöÄ</div>
                            <div class="aspect-title">Deployment</div>
                        </div>
                        <div class="monolith-column">
                            <div class="feature-item">
                                <span class="status-indicator negative">‚óè</span>
                                Single deployable unit
                            </div>
                            <div class="feature-item">
                                <span class="status-indicator negative">‚óè</span>
                                All-or-nothing deployment
                            </div>
                            <div class="feature-item">
                                <span class="status-indicator positive">‚óè</span>
                                Simpler deployment process
                            </div>
                        </div>
                        <div class="microservices-column">
                            <div class="feature-item">
                                <span class="status-indicator positive">‚óè</span>
                                Independent service deployment
                            </div>
                            <div class="feature-item">
                                <span class="status-indicator positive">‚óè</span>
                                Rolling deployments possible
                            </div>
                            <div class="feature-item">
                                <span class="status-indicator negative">‚óè</span>
                                Complex orchestration needed
                            </div>
                        </div>
                    </div>
                    
                    <div class="comparison-row" data-category="scaling">
                        <div class="aspect-column">
                            <div class="aspect-icon">üìà</div>
                            <div class="aspect-title">Scaling</div>
                        </div>
                        <div class="monolith-column">
                            <div class="feature-item">
                                <span class="status-indicator negative">‚óè</span>
                                Scale entire application
                            </div>
                            <div class="feature-item">
                                <span class="status-indicator negative">‚óè</span>
                                Resource waste on unused features
                            </div>
                            <div class="feature-item">
                                <span class="status-indicator neutral">‚óè</span>
                                Vertical scaling preferred
                            </div>
                        </div>
                        <div class="microservices-column">
                            <div class="feature-item">
                                <span class="status-indicator positive">‚óè</span>
                                Scale individual services
                            </div>
                            <div class="feature-item">
                                <span class="status-indicator positive">‚óè</span>
                                Optimize resources per service
                            </div>
                            <div class="feature-item">
                                <span class="status-indicator positive">‚óè</span>
                                Horizontal scaling friendly
                            </div>
                        </div>
                    </div>
                    
                    <div class="comparison-row" data-category="technology">
                        <div class="aspect-column">
                            <div class="aspect-icon">‚öôÔ∏è</div>
                            <div class="aspect-title">Technology Stack</div>
                        </div>
                        <div class="monolith-column">
                            <div class="feature-item">
                                <span class="status-indicator negative">‚óè</span>
                                Single technology stack
                            </div>
                            <div class="feature-item">
                                <span class="status-indicator negative">‚óè</span>
                                Difficult to upgrade
                            </div>
                            <div class="feature-item">
                                <span class="status-indicator positive">‚óè</span>
                                Easier team coordination
                            </div>
                        </div>
                        <div class="microservices-column">
                            <div class="feature-item">
                                <span class="status-indicator positive">‚óè</span>
                                Multiple technology stacks
                            </div>
                            <div class="feature-item">
                                <span class="status-indicator positive">‚óè</span>
                                Independent technology evolution
                            </div>
                            <div class="feature-item">
                                <span class="status-indicator negative">‚óè</span>
                                Requires diverse expertise
                            </div>
                        </div>
                    </div>
                    
                    <div class="comparison-row" data-category="database">
                        <div class="aspect-column">
                            <div class="aspect-icon">üóÑÔ∏è</div>
                            <div class="aspect-title">Data Management</div>
                        </div>
                        <div class="monolith-column">
                            <div class="feature-item">
                                <span class="status-indicator neutral">‚óè</span>
                                Shared database
                            </div>
                            <div class="feature-item">
                                <span class="status-indicator positive">‚óè</span>
                                ACID transactions
                            </div>
                            <div class="feature-item">
                                <span class="status-indicator positive">‚óè</span>
                                Simpler data consistency
                            </div>
                        </div>
                        <div class="microservices-column">
                            <div class="feature-item">
                                <span class="status-indicator positive">‚óè</span>
                                Database per service
                            </div>
                            <div class="feature-item">
                                <span class="status-indicator negative">‚óè</span>
                                Eventual consistency
                            </div>
                            <div class="feature-item">
                                <span class="status-indicator negative">‚óè</span>
                                Distributed transaction complexity
                            </div>
                        </div>
                    </div>
                    
                    <div class="comparison-row" data-category="development">
                        <div class="aspect-column">
                            <div class="aspect-icon">üë®‚Äçüíª</div>
                            <div class="aspect-title">Development</div>
                        </div>
                        <div class="monolith-column">
                            <div class="feature-item">
                                <span class="status-indicator positive">‚óè</span>
                                Faster initial development
                            </div>
                            <div class="feature-item">
                                <span class="status-indicator positive">‚óè</span>
                                Easier debugging
                            </div>
                            <div class="feature-item">
                                <span class="status-indicator negative">‚óè</span>
                                Coordination bottlenecks
                            </div>
                        </div>
                        <div class="microservices-column">
                            <div class="feature-item">
                                <span class="status-indicator positive">‚óè</span>
                                Parallel team development
                            </div>
                            <div class="feature-item">
                                <span class="status-indicator negative">‚óè</span>
                                Complex debugging
                            </div>
                            <div class="feature-item">
                                <span class="status-indicator positive">‚óè</span>
                                Team autonomy
                            </div>
                        </div>
                    </div>
                    
                    <div class="comparison-row" data-category="testing">
                        <div class="aspect-column">
                            <div class="aspect-icon">üß™</div>
                            <div class="aspect-title">Testing</div>
                        </div>
                        <div class="monolith-column">
                            <div class="feature-item">
                                <span class="status-indicator positive">‚óè</span>
                                Simpler end-to-end testing
                            </div>
                            <div class="feature-item">
                                <span class="status-indicator positive">‚óè</span>
                                Single test environment
                            </div>
                            <div class="feature-item">
                                <span class="status-indicator negative">‚óè</span>
                                Long test cycles
                            </div>
                        </div>
                        <div class="microservices-column">
                            <div class="feature-item">
                                <span class="status-indicator positive">‚óè</span>
                                Fast unit testing
                            </div>
                            <div class="feature-item">
                                <span class="status-indicator negative">‚óè</span>
                                Complex integration testing
                            </div>
                            <div class="feature-item">
                                <span class="status-indicator neutral">‚óè</span>
                                Multiple test environments
                            </div>
                        </div>
                    </div>
                    
                    <div class="comparison-row" data-category="monitoring">
                        <div class="aspect-column">
                            <div class="aspect-icon">üìä</div>
                            <div class="aspect-title">Monitoring</div>
                        </div>
                        <div class="monolith-column">
                            <div class="feature-item">
                                <span class="status-indicator positive">‚óè</span>
                                Centralized logging
                            </div>
                            <div class="feature-item">
                                <span class="status-indicator positive">‚óè</span>
                                Simpler monitoring setup
                            </div>
                            <div class="feature-item">
                                <span class="status-indicator neutral">‚óè</span>
                                Single point of observation
                            </div>
                        </div>
                        <div class="microservices-column">
                            <div class="feature-item">
                                <span class="status-indicator negative">‚óè</span>
                                Distributed tracing needed
                            </div>
                            <div class="feature-item">
                                <span class="status-indicator negative">‚óè</span>
                                Complex monitoring setup
                            </div>
                            <div class="feature-item">
                                <span class="status-indicator positive">‚óè</span>
                                Granular observability
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Interactive Comparison Summary -->
                <div class="comparison-summary">
                    <div class="summary-section">
                        <h5>üìä When to Choose Monolith</h5>
                        <div class="scenario-cards">
                            <div class="scenario-card monolith-card">
                                <div class="scenario-icon">üéØ</div>
                                <div class="scenario-title">Small to Medium Projects</div>
                                <div class="scenario-desc">Simple applications with limited complexity</div>
                            </div>
                            <div class="scenario-card monolith-card">
                                <div class="scenario-icon">üë•</div>
                                <div class="scenario-title">Small Teams</div>
                                <div class="scenario-desc">Teams of 2-8 developers</div>
                            </div>
                            <div class="scenario-card monolith-card">
                                <div class="scenario-icon">‚ö°</div>
                                <div class="scenario-title">Rapid Prototyping</div>
                                <div class="scenario-desc">Quick development and deployment</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="summary-section">
                        <h5>üîß When to Choose Microservices</h5>
                        <div class="scenario-cards">
                            <div class="scenario-card microservices-card">
                                <div class="scenario-icon">üè¢</div>
                                <div class="scenario-title">Large Enterprises</div>
                                <div class="scenario-desc">Complex business domains</div>
                            </div>
                            <div class="scenario-card microservices-card">
                                <div class="scenario-icon">üë•</div>
                                <div class="scenario-title">Multiple Teams</div>
                                <div class="scenario-desc">Independent development teams</div>
                            </div>
                            <div class="scenario-card microservices-card">
                                <div class="scenario-icon">üìà</div>
                                <div class="scenario-title">High Scalability</div>
                                <div class="scenario-desc">Different scaling requirements per service</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Interactive Comparison Filters -->
                <div class="comparison-filters">
                    <h5>üîç Filter by Category</h5>
                    <div class="filter-buttons">
                        <button class="filter-btn active" data-filter="all">All Aspects</button>
                        <button class="filter-btn" data-filter="deployment">üöÄ Deployment</button>
                        <button class="filter-btn" data-filter="scaling">üìà Scaling</button>
                        <button class="filter-btn" data-filter="technology">‚öôÔ∏è Technology</button>
                        <button class="filter-btn" data-filter="database">üóÑÔ∏è Database</button>
                        <button class="filter-btn" data-filter="development">üë®‚Äçüíª Development</button>
                        <button class="filter-btn" data-filter="testing">üß™ Testing</button>
                        <button class="filter-btn" data-filter="monitoring">üìä Monitoring</button>
                    </div>
                </div>
            </div>
        </div>

        <h3>Key Architecture Components</h3>
        <div class="components-grid">
            <div class="component-card">
                <div class="component-icon">üö™</div>
                <h4>API Gateway</h4>
                <p>Single entry point for all client requests with routing, authentication, and rate limiting.</p>
            </div>
            <div class="component-card">
                <div class="component-icon">üîç</div>
                <h4>Service Discovery</h4>
                <p>Automatic detection and registration of service instances for dynamic communication.</p>
            </div>
            <div class="component-card">
                <div class="component-icon">üì¨</div>
                <h4>Message Queue</h4>
                <p>Asynchronous communication between services using events and messages.</p>
            </div>
            <div class="component-card">
                <div class="component-icon">üìä</div>
                <h4>Monitoring</h4>
                <p>Centralized logging, metrics collection, and distributed tracing across services.</p>
            </div>
        </div>
    </div>

    <div class="section" id="benefits">
        <h2>‚öñÔ∏è Benefits and Challenges</h2>
        
        <div class="pros-cons">
            <div class="pros">
                <h3>‚úÖ Benefits</h3>
                <ul>
                    <li><strong>Independent Deployment:</strong> Deploy services separately</li>
                    <li><strong>Technology Diversity:</strong> Use different tech stacks</li>
                    <li><strong>Scalability:</strong> Scale individual services</li>
                    <li><strong>Fault Isolation:</strong> Failures don't affect entire system</li>
                    <li><strong>Team Autonomy:</strong> Small teams can work independently</li>
                    <li><strong>Faster Development:</strong> Parallel development possible</li>
                </ul>
            </div>
            
            <div class="cons">
                <h3>‚ùå Challenges</h3>
                <ul>
                    <li><strong>Complexity:</strong> Distributed system complexity</li>
                    <li><strong>Network Latency:</strong> Inter-service communication overhead</li>
                    <li><strong>Data Consistency:</strong> Managing distributed transactions</li>
                    <li><strong>Testing:</strong> Integration testing complexity</li>
                    <li><strong>Monitoring:</strong> Observing distributed systems</li>
                    <li><strong>Security:</strong> Multiple attack surfaces</li>
                </ul>
            </div>
        </div>
    </div>

    <div class="section" id="best-practices">
        <h2>üéØ Best Practices</h2>

        <div class="best-practice">
            <h3>1. Single Responsibility Principle</h3>
            <p>Each microservice should have a single reason to change and should be responsible for one business capability.</p>
            <div class="code-block">
                <strong>Good:</strong> UserService handles user registration, authentication, and profile management<br>
                <strong>Bad:</strong> UserService handles users, orders, and inventory management
            </div>
        </div>

        <div class="best-practice">
            <h3>2. Database Per Service</h3>
            <p>Each service should own its data and database. Avoid shared databases between services.</p>
            <div class="code-block">
                <pre>
// Each service has its own database
UserService ‚Üí UserDB (PostgreSQL)
ProductService ‚Üí ProductDB (MongoDB)
OrderService ‚Üí OrderDB (MySQL)
                </pre>
            </div>
        </div>

        <div class="best-practice">
            <h3>3. API Design and Versioning</h3>
            <p>Design APIs with versioning in mind to ensure backward compatibility.</p>
            <div class="code-block">
                <pre>
// RESTful API versioning
GET /api/v1/users
GET /api/v2/users

// Semantic versioning for services
user-service:1.2.3
product-service:2.0.1
                </pre>
            </div>
        </div>

        <div class="best-practice">
            <h3>4. Circuit Breaker Pattern</h3>
            <p>Implement circuit breakers to prevent cascading failures.</p>
            <div class="code-block">
                <pre>
// Example with resilience4j
@CircuitBreaker(name = "product-service")
public Product getProduct(String id) {
    return productServiceClient.getProduct(id);
}
                </pre>
            </div>
        </div>

        <div class="best-practice">
            <h3>5. Asynchronous Communication</h3>
            <p>Use message queues and event-driven architecture for loose coupling.</p>
            <div class="code-block">
                <pre>
// Event-driven communication
OrderCreated ‚Üí [Message Queue] ‚Üí InventoryService
                              ‚Üí PaymentService
                              ‚Üí ShippingService
                </pre>
            </div>
        </div>

        <div class="best-practice">
            <h3>6. Health Checks and Monitoring</h3>
            <p>Implement health checks and comprehensive monitoring for all services.</p>
            <div class="code-block">
                <pre>
// Spring Boot Actuator health endpoint
GET /actuator/health
{
  "status": "UP",
  "components": {
    "db": {"status": "UP"},
    "redis": {"status": "UP"}
  }
}
                </pre>
            </div>
        </div>

        <div class="best-practice">
            <h3>7. Security Best Practices</h3>
            <ul>
                <li>Use JWT tokens for authentication</li>
                <li>Implement OAuth 2.0 for authorization</li>
                <li>Encrypt sensitive data in transit and at rest</li>
                <li>Use API rate limiting</li>
                <li>Implement proper logging without sensitive data</li>
            </ul>
        </div>

        <div class="best-practice">
            <h3>8. Configuration Management</h3>
            <p>Externalize configuration and use environment-specific settings.</p>
            <div class="code-block">
                <pre>
// Environment-specific configuration
development:
  database.url: localhost:5432
  
production:
  database.url: prod-db.company.com:5432
                </pre>
            </div>
        </div>
    </div>

    <div class="section" id="patterns">
        <h2>üé® Design Patterns</h2>
        <p>Design patterns provide reusable solutions to common problems in microservices architecture. Understanding these patterns is key to building robust, scalable, and maintainable systems.</p>

        <div class="best-practice">
            <h3>1. API Gateway Pattern</h3>
            <p>The API Gateway acts as a single entry point for all client requests, routing them to the appropriate downstream microservice. This pattern simplifies the client by providing a single endpoint and can handle cross-cutting concerns like authentication, rate limiting, and logging.</p>
            <div class="code-block">
                <pre>
Client Request ‚Üí [API Gateway] ‚Üí Service A
                              ‚Üí Service B
                              ‚Üí Service C

// The gateway aggregates responses from multiple services if needed.
// (This is demonstrated in the interactive diagram in the Architecture section)
                </pre>
            </div>
        </div>

        <div class="best-practice">
            <h3>2. Service Registry and Discovery Pattern</h3>
            <p>In a dynamic microservices environment, service instances are constantly being created and destroyed. This pattern provides a central "phone book" (Service Registry) where services register their locations. Other services can then query the registry (Service Discovery) to find out how to communicate with them.</p>
            <div class="code-block">
                <pre>
// 1. Service Registration
ProductService (instance 1) ‚Üí Registers at 10.1.2.3:8080 with Registry
ProductService (instance 2) ‚Üí Registers at 10.1.2.4:8080 with Registry

// 2. Service Discovery
OrderService needs Product info ‚Üí Asks Registry for "ProductService"
Registry returns ‚Üí [10.1.2.3:8080, 10.1.2.4:8080]
OrderService then calls one of the available instances.

// Popular Tools: Netflix Eureka, Consul, Zookeeper
                </pre>
            </div>
        </div>

        <div class="best-practice">
            <h3>3. Saga Pattern</h3>
            <p>Sagas are used to manage data consistency across multiple services in a distributed transaction. Since two-phase commits are not practical in microservices, a saga uses a sequence of local transactions. If one transaction fails, the saga executes compensating transactions to undo the preceding work.</p>
            
            <h4>Choreography-Based Saga (Event-Driven)</h4>
            <p>Services communicate by publishing and listening to events. There is no central coordinator.</p>
            <div class="code-block">
                <pre>
// Choreography-based saga for an e-commerce order
1. OrderService creates order ‚Üí Publishes "OrderCreated" event
2. PaymentService listens for "OrderCreated" ‚Üí Processes payment ‚Üí Publishes "PaymentProcessed" event
3. InventoryService listens for "PaymentProcessed" ‚Üí Reserves items ‚Üí Publishes "ItemsReserved" event
4. ShippingService listens for "ItemsReserved" ‚Üí Schedules delivery ‚Üí Publishes "DeliveryScheduled" event

// If PaymentService fails, it publishes a "PaymentFailed" event.
// OrderService listens for "PaymentFailed" and executes a compensating transaction (e.g., cancels the order).
                </pre>
            </div>

            <h4>Orchestration-Based Saga</h4>
            <p>A central orchestrator service is responsible for telling the other services what to do and when. It manages the entire sequence of transactions.</p>
             <div class="code-block">
                <pre>
// Orchestration-based saga for an e-commerce order
1. Client sends "CreateOrder" request to OrderOrchestrator.
2. OrderOrchestrator ‚Üí calls PaymentService to process payment.
3. PaymentService responds ‚Üí Orchestrator calls InventoryService to reserve items.
4. InventoryService responds ‚Üí Orchestrator calls ShippingService to schedule delivery.
5. Orchestrator confirms order completion.

// If any step fails, the Orchestrator is responsible for calling compensating
// transactions in reverse order (e.g., refund payment, release inventory).
                </pre>
            </div>
        </div>

        <div class="best-practice">
            <h3>4. Circuit Breaker Pattern</h3>
            <p>This pattern prevents an application from repeatedly trying to execute an operation that is likely to fail. After a configured number of failures, the circuit "opens," and subsequent calls fail immediately without attempting the operation. After a timeout, the circuit goes into a "half-open" state to test if the underlying problem is resolved.</p>
            
            <h4>Circuit Breaker Pattern Demo</h4>
            <div class="circuit-breaker-demo">
                <div class="control-panel">
                    <button id="toggleCircuitBtn" class="control-btn">Toggle Circuit Breaker State</button>
                </div>
                <div id="circuitState" class="circuit-state circuit-closed">Circuit: CLOSED</div>
                <div id="circuitDescription">‚úÖ Requests are flowing normally to the service.</div>
            </div>
        </div>

        <div class="best-practice">
            <h3>5. Strangler Fig Pattern</h3>
            <p>This pattern is used for incrementally migrating a legacy monolith to a microservices architecture. A facade is placed in front of the monolith, which intercepts requests. Initially, it routes all traffic to the monolith. Over time, as new microservices are built to replace parts of the monolith, the facade is updated to route specific requests to the new services, gradually "strangling" the monolith.</p>
            <div class="code-block">
                <pre>
// Initial State
User Request ‚Üí [Facade] ‚Üí Monolith (handles all logic)

// Migration Step 1: User Service is extracted
User Request for "/profile" ‚Üí [Facade] ‚Üí New UserService
User Request for "/orders"  ‚Üí [Facade] ‚Üí Monolith

// Final State
User Request ‚Üí [Facade] ‚Üí All requests routed to various microservices
                       ‚Üí Monolith is eventually retired
                </pre>
            </div>
        </div>

        <div class="best-practice">
            <h3>6. Command Query Responsibility Segregation (CQRS)</h3>
            <p>CQRS separates the models for reading data (Queries) from the models for updating data (Commands). This is useful because the requirements for reading data (e.g., complex joins, denormalized views) are often very different from the requirements for writing data (e.g., normalized, consistent models).</p>
             <div class="code-block">
                <pre>
// Write Side (Commands)
[Client] ‚Üí sends "UpdateUserAddressCommand" ‚Üí [Command Handler] ‚Üí Updates Write Database

// Read Side (Queries)
[Client] ‚Üí sends "GetUserProfileQuery" ‚Üí [Query Handler] ‚Üí Reads from Read Database (Optimized for reads)

// Data is synchronized from the Write DB to the Read DB, often via events.
                </pre>
            </div>
        </div>
    </div>

    <div class="section" id="technologies">
        <h2>üõ†Ô∏è Technology Stack</h2>
        <p>Choosing the right technology stack is crucial for a successful microservices architecture. The choice often depends on the team's expertise, the specific requirements of the service, and the overall ecosystem. Here are some popular choices:</p>
        
        <div class="best-practice">
            <h4>Service Development</h4>
            <ul>
                <li><strong>Java:</strong> Spring Boot, Quarkus, Micronaut</li>
                <li><strong>JavaScript/Node.js:</strong> Express, NestJS</li>
                <li><strong>Python:</strong> Flask, FastAPI</li>
                <li><strong>Go:</strong> Gin, Go-kit</li>
                <li><strong>.NET:</strong> ASP.NET Core</li>
            </ul>
        </div>

        <div class="best-practice">
            <h4>API Gateway</h4>
            <ul>
                <li><strong>Managed:</strong> Amazon API Gateway, Azure API Management, Google Cloud API Gateway</li>
                <li><strong>Self-hosted:</strong> Kong, Tyk, Spring Cloud Gateway, Ocelot (.NET)</li>
            </ul>
        </div>

        <div class="best-practice">
            <h4>Containerization & Orchestration</h4>
            <ul>
                <li><strong>Docker:</strong> For containerizing applications.</li>
                <li><strong>Kubernetes:</strong> The de-facto standard for container orchestration.</li>
            </ul>
        </div>

        <div class="best-practice">
            <h4>Messaging & Event Streaming</h4>
            <ul>
                <li><strong>RabbitMQ:</strong> Traditional message broker.</li>
                <li><strong>Apache Kafka:</strong> High-throughput distributed streaming platform.</li>
            </ul>
        </div>
    </div>

    <div class="section" id="implementation">
        <h2>üîß Implementation Guide</h2>

        <h3>Step 1: Start with a Monolith</h3>
        <p>Begin with a well-structured monolith and gradually extract services.</p>

        <h3>Step 2: Identify Service Boundaries</h3>
        <p>Use Domain-Driven Design (DDD) to identify bounded contexts.</p>
        <div class="code-block">
            <pre>
// Example service boundaries
User Management Context ‚Üí UserService
Product Catalog Context ‚Üí ProductService
Order Management Context ‚Üí OrderService
Payment Context ‚Üí PaymentService
            </pre>
        </div>

        <h3>Step 3: Setup Infrastructure</h3>
        <div class="code-block">
            <pre>
# Docker Compose example
version: '3.8'
services:
  api-gateway:
    image: nginx:alpine
    ports: ["80:80"]
    
  user-service:
    build: ./user-service
    environment:
      - DB_HOST=user-db
    depends_on: [user-db]
    
  user-db:
    image: postgres:13
    environment:
      - POSTGRES_DB=users
            </pre>
        </div>

        <h3>Step 4: Implement Service Communication</h3>
        <div class="code-block">
            <pre>
// REST API communication
@RestController
public class UserController {
    
    @Autowired
    private OrderServiceClient orderServiceClient;
    
    @GetMapping("/users/{id}/orders")
    public List&lt;Order&gt; getUserOrders(@PathVariable String id) {
        return orderServiceClient.getOrdersByUserId(id);
    }
}
            </pre>
        </div>

        <h3>Step 5: Add Observability</h3>
        <div class="code-block">
            <pre>
// Logging configuration
logging:
  level:
    com.company: DEBUG
  pattern:
    console: "%d{HH:mm:ss.SSS} [%thread] %-5level [%X{traceId}] %logger{36} - %msg%n"
            </pre>
        </div>
    </div>

    <div class="section" id="migration">
        <h2>üîÑ Migrating from Monolith to Microservices</h2>
        
        <p>Migration from a monolithic architecture to microservices is a complex process that requires careful planning and execution. Here's a comprehensive guide to help you through this transformation.</p>
        
        <h3>üóìÔ∏è Typical Migration Timeline</h3>
        <div class="migration-timeline">
            <div class="timeline-step">
                <div class="timeline-dot"></div>
                <div><strong>Phase 1:</strong> Assessment & Planning (Month 1-2)</div>
            </div>
            <div class="timeline-step">
                <div class="timeline-dot"></div>
                <div><strong>Phase 2:</strong> Infrastructure Setup (Month 2-3)</div>
            </div>
            <div class="timeline-step">
                <div class="timeline-dot"></div>
                <div><strong>Phase 3:</strong> First Service Migration (Month 3-4)</div>
            </div>
            <div class="timeline-step">
                <div class="timeline-dot"></div>
                <div><strong>Phase 4:</strong> Full Migration (Month 4-12)</div>
            </div>
        </div>

        <!-- The rest of the detailed migration content follows... -->
    </div>

    <div class="section" id="monitoring">
        <h2>üìä Monitoring and Observability</h2>
        
        <h3>Live Monitoring Dashboard</h3>
        <div class="monitoring-dashboard">
            <div class="metric-card">
                <div>Response Time</div>
                <div class="metric-value" id="responseTime">245ms</div>
                <div class="loading-bar">
                    <div class="loading-progress"></div>
                </div>
            </div>
            <div class="metric-card">
                <div>Throughput</div>
                <div class="metric-value" id="throughput">1,250</div>
                <div class="loading-bar">
                    <div class="loading-progress" style="animation-delay: 0.5s;"></div>
                </div>
            </div>
            <div class="metric-card">
                <div>Error Rate</div>
                <div class="metric-value" id="errorRate">0.02%</div>
                <div class="loading-bar">
                    <div class="loading-progress" style="animation-delay: 1s;"></div>
                </div>
            </div>
            <div class="metric-card">
                <div>Active Services</div>
                <div class="metric-value" id="activeServices">12</div>
                <div class="loading-bar">
                    <div class="loading-progress" style="animation-delay: 1.5s;"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="section" id="conclusion">
        <h2>üìö Conclusion</h2>
        <p>Microservices architecture offers significant benefits in terms of scalability, flexibility, and resilience. By following best practices and leveraging the right tools and patterns, you can successfully design, implement, and manage a microservices-based system.</p>
        
        <h3>Key Takeaways</h3>
        <ul>
            <li>Understand the principles and benefits of microservices architecture.</li>
            <li>Follow best practices for designing and implementing microservices.</li>
            <li>Utilize design patterns to solve common challenges in microservices.</li>
            <li>Choose the right technology stack for your microservices.</li>
            <li>Implement effective monitoring and observability.</li>
            <li>Plan and execute a successful migration from monolith to microservices.</li>
        </ul>
        
        <h3>Further Reading</h3>
        <ul>
            <li><a href="https://microservices.io/patterns/index.html" target="_blank">Microservices Patterns</a></li>
            <li><a href="https://martinfowler.com/articles/richardsonMaturityModel.html" target="_blank">Richardson Maturity Model</a></li>
            <li><a href="https://12factor.net/" target="_blank">The Twelve-Factor App</a></li>
            <li><a href="https://www.oreilly.com/library/view/microservices-up-and/9781491950340/" target="_blank">Microservices Up and Running</a></li>
        </ul>
    </div>

    <div class="section" id="gateway-demo">
        <h2>üö™ API Gateway Pattern Demo</h2>
        
        <div class="interactive-gateway-demo">
            <h4>Interactive API Gateway Pattern</h4>
            
            <!-- Gateway Demo Controls -->
            <div class="gateway-controls" id="gatewayControls">
                <button class="control-btn gateway-request-btn" data-request-type="login">üîê Login Request</button>
                <button class="control-btn gateway-request-btn" data-request-type="search">üîç Search Products</button>
                <button class="control-btn gateway-request-btn" data-request-type="order">üõí Create Order</button>
                <button class="control-btn gateway-request-btn" data-request-type="payment">üí≥ Process Payment</button>
                <button class="control-btn" id="resetGatewayBtn">üîÑ Reset</button>
            </div>
            
            <!-- Interactive Gateway Diagram -->
            <div class="gateway-flow-container">
                <!-- Client Section -->
                <div class="gateway-client" id="gatewayClient">
                    <div class="client-icon">üë§</div>
                    <div class="client-label">Client Application</div>
                    <div class="request-info" id="requestInfo">Click a button to send request</div>
                </div>
                
                <!-- Arrow from Client to Gateway -->
                <div class="gateway-arrow" id="clientToGateway">
                    <div class="arrow-line"></div>
                    <div class="arrow-head">‚ñ∂</div>
                    <div class="request-packet" id="requestPacket"></div>
                </div>
                
                <!-- API Gateway -->
                <div class="api-gateway" id="apiGateway">
                    <div class="gateway-icon">üö™</div>
                    <div class="gateway-label">API Gateway</div>
                    <div class="gateway-functions">
                        <div class="function-item" id="authFeature">üîê Auth</div>
                        <div class="function-item" id="rateLimitFeature">‚è±Ô∏è Rate Limit</div>
                        <div class="function-item" id="routingFeature">üéØ Routing</div>
                        <div class="function-item" id="loggingFeature">üìù Logging</div>
                    </div>
                    <div class="gateway-status" id="gatewayStatus">Ready</div>
                </div>
                
                <!-- Arrows from Gateway to Services -->
                <div class="service-arrows">
                    <div class="service-arrow" id="toUserService">
                        <div class="arrow-line"></div>
                        <div class="arrow-head">‚ñ∂</div>
                        <div class="service-packet" id="userPacket"></div>
                    </div>
                    <div class="service-arrow" id="toProductService">
                        <div class="arrow-line"></div>
                        <div class="arrow-head">‚ñ∂</div>
                        <div class="service-packet" id="productPacket"></div>
                    </div>
                    <div class="service-arrow" id="toOrderService">
                        <div class="arrow-line"></div>
                        <div class="arrow-head">‚ñ∂</div>
                        <div class="service-packet" id="orderPacket"></div>
                    </div>
                    <div class="service-arrow" id="toPaymentService">
                        <div class="arrow-line"></div>
                        <div class="arrow-head">‚ñ∂</div>
                        <div class="service-packet" id="paymentPacket"></div>
                    </div>
                </div>
                
                <!-- Microservices -->
                <div class="gateway-services">
                    <div class="gateway-service" id="userServiceGW">
                        <div class="service-icon">üë§</div>
                        <div class="service-name">User Service</div>
                        <div class="service-status">Idle</div>
                    </div>
                    <div class="gateway-service" id="productServiceGW">
                        <div class="service-icon">üì¶</div>
                        <div class="service-name">Product Service</div>
                        <div class="service-status">Idle</div>
                    </div>
                    <div class="gateway-service" id="orderServiceGW">
                        <div class="service-icon">üõí</div>
                        <div class="service-name">Order Service</div>
                        <div class="service-status">Idle</div>
                    </div>
                    <div class="gateway-service" id="paymentServiceGW">
                        <div class="service-icon">üí≥</div>
                        <div class="service-name">Payment Service</div>
                        <div class="service-status">Idle</div>
                    </div>
                </div>
            </div>
            
            <!-- Request Log -->
            <div class="request-log">
                <h5>üìã Request Log</h5>
                <div class="log-content" id="requestLog">
                    <div class="log-entry">System ready - Click buttons above to simulate requests</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const microservicesGuide = {
            // --- STATE ---
            currentArchitecture: 'microservices',
            trafficRunning: false,
            circuitBreakerState: 'closed',
            trafficInterval: null,
            gatewayDemoRunning: false,

            // --- CACHED ELEMENTS ---
            elements: {},

            // --- INITIALIZATION ---
            init() {
                this.cacheDOMElements();
                this.bindEvents();
                this.showArchitecture('microservices');
                this.initializeFilterSystem(); // Add this line
                console.log('Enhanced microservices architecture guide initialized.');
            },

            // Add this method to the microservicesGuide object
            // Initialize filter system
            initializeFilterSystem() {
                // Ensure all comparison rows are visible initially
                const allRows = document.querySelectorAll('.comparison-row:not(.header-row)');
                allRows.forEach(row => {
                    row.style.display = 'contents';
                    row.style.opacity = '1';
                    row.style.transform = 'scale(1)';
                    row.classList.remove('filtering-out', 'filtering-in');
                });

                // Set initial filter to 'all'
                const allFilterBtn = document.querySelector('.filter-btn[data-filter="all"]');
                if (allFilterBtn) {
                    allFilterBtn.classList.add('active');
                }

                console.log('Filter system initialized');
            },

            cacheDOMElements() {
                this.elements = {
                    // Architecture Toggle
                    showMonolithBtn: document.getElementById('showMonolithBtn'),
                    showMicroservicesBtn: document.getElementById('showMicroservicesBtn'),
                    startTrafficBtn: document.getElementById('startTrafficBtn'),
                    stopTrafficBtn: document.getElementById('stopTrafficBtn'),
                    resetArchBtn: document.getElementById('resetArchBtn'),
                    
                    // Architecture Views
                    monolithView: document.getElementById('monolithView'),
                    microservicesView: document.getElementById('microservicesView'),
                    architectureInfo: document.getElementById('architectureInfo'),
                    
                    // Monolith Elements
                    monolithClient: document.getElementById('monolithClient'),
                    monolithLB: document.getElementById('monolithLB'),
                    monolithApp: document.getElementById('monolithApp'),
                    monolithStatus: document.getElementById('monolithStatus'),
                    monolithDB: document.getElementById('monolithDB'),
                    monolithModules: document.querySelectorAll('#monolithView .module'),
                    monolithDots: document.querySelectorAll('#monolithView .traffic-dot'),
                    
                    // Microservices Elements
                    microClient: document.getElementById('microClient'),
                    microGateway: document.getElementById('microGateway'),
                    gatewayStatus: document.getElementById('gatewayStatus'),
                    gatewayFeatures: document.querySelectorAll('.feature-badge'),
                    serviceNodes: document.querySelectorAll('.service-node'),
                    messageQueue: document.getElementById('messageQueue'),
                    microDatabases: document.querySelectorAll('#microservicesView .database-node'),
                    microDots: document.querySelectorAll('#microservicesView .traffic-dot'),
                    connectionArrows: document.querySelectorAll('.connection-arrow'),
                    
                    // Other Elements
                    toggleCircuitBtn: document.getElementById('toggleCircuitBtn'),
                    circuitState: document.getElementById('circuitState'),
                    circuitDescription: document.getElementById('circuitDescription'),
                    gatewayControls: document.getElementById('gatewayControls'),
                    resetGatewayBtn: document.getElementById('resetGatewayBtn'),
                    requestLog: document.getElementById('requestLog'),
                    
                    // Metrics
                    responseTime: document.getElementById('responseTime'),
                    throughput: document.getElementById('throughput'),
                    errorRate: document.getElementById('errorRate'),
                    activeServices: document.getElementById('activeServices'),
                };
            },

            bindEvents() {
                // Architecture Toggle
                this.elements.showMonolithBtn?.addEventListener('click', () => this.showArchitecture('monolith'));
                this.elements.showMicroservicesBtn?.addEventListener('click', () => this.showArchitecture('microservices'));
                
                // Traffic Controls
                this.elements.startTrafficBtn?.addEventListener('click', () => this.startTraffic());
                this.elements.stopTrafficBtn?.addEventListener('click', () => this.stopTraffic());
                this.elements.resetArchBtn?.addEventListener('click', () => this.resetArchitecture());

                // Service Node Clicks
                this.elements.serviceNodes?.forEach(node => {
                    node.addEventListener('click', () => this.highlightService(node));
                });

                // Comparison Filters
                this.elements.filterButtons = document.querySelectorAll('.filter-btn');
                this.elements.filterButtons?.forEach(btn => {
                    btn.addEventListener('click', () => this.filterComparison(btn.dataset.filter));
                });

                // Other existing bindings
                this.elements.toggleCircuitBtn?.addEventListener('click', () => this.toggleCircuitBreaker());
                this.elements.gatewayControls?.addEventListener('click', e => {
                    const btn = e.target.closest('.gateway-request-btn');
                    if (btn) this.simulateRequest(btn.dataset.requestType);
                });
                this.elements.resetGatewayBtn?.addEventListener('click', () => this.resetGateway());
            },

            // Add this new method for comparison filtering
            filterComparison(filter) {
                // Update active filter button
                this.elements.filterButtons?.forEach(btn => {
                    btn.classList.toggle('active', btn.dataset.filter === filter);
                });

                // Get all comparison rows (excluding header)
                const comparisonRows = document.querySelectorAll('.comparison-row:not(.header-row)');
                
                comparisonRows.forEach(row => {
                    const shouldShow = filter === 'all' || row.dataset.category === filter;
                    
                    if (shouldShow) {
                        row.classList.remove('filtering-out');
                        row.classList.add('filtering-in');
                        setTimeout(() => {
                            row.style.display = 'contents';
                        }, 50);
                    } else {
                        row.classList.remove('filtering-in');
                        row.classList.add('filtering-out');
                        setTimeout(() => {
                            row.style.display = 'none';
                        }, 300);
                    }
                });

                // Update filter description
                const filterDescriptions = {
                    all: 'Showing all comparison aspects',
                    deployment: 'Comparing deployment strategies and processes',
                    scaling: 'Comparing scalability approaches and challenges',
                    technology: 'Comparing technology stack flexibility',
                    database: 'Comparing data management strategies',
                    development: 'Comparing development experience and workflows',
                    testing: 'Comparing testing approaches and complexity',
                    monitoring: 'Comparing observability and monitoring requirements'
                };

                const filterDesc = document.querySelector('.comparison-header p');
                if (filterDesc && filterDescriptions[filter]) {
                    filterDesc.textContent = filterDescriptions[filter];
                }
            },

            // --- ARCHITECTURE METHODS ---
            showArchitecture(type) {
                this.currentArchitecture = type;
                
                // Update button states
                this.elements.showMonolithBtn?.classList.toggle('active', type === 'monolith');
                this.elements.showMicroservicesBtn?.classList.toggle('active', type === 'microservices');
                
                // Show/hide views
                if (this.elements.monolithView) {
                    this.elements.monolithView.style.display = type === 'monolith' ? 'block' : 'none';
                }
                if (this.elements.microservicesView) {
                    this.elements.microservicesView.style.display = type === 'microservices' ? 'block' : 'none';
                }
                
                // Update info panel
                this.updateArchitectureInfo(type);
                
                // Reset any running animations
                this.stopTraffic();
            },

            updateArchitectureInfo(type) {
                const info = {
                    monolith: {
                        title: 'üè¢ Monolithic Architecture',
                        subtitle: 'Single deployable unit with shared resources',
                        features: [
                            'All components in one application',
                            'Shared database across modules',
                            'Single deployment process',
                            'Tight coupling between components',
                            'Simpler initial development'
                        ]
                    },
                    microservices: {
                        title: 'üîß Microservices Architecture',  
                        subtitle: 'Distributed system with independent services',
                        features: [
                            'Each service has its own database',
                            'Services communicate via API Gateway',
                            'Event-driven communication through message queue',
                            'Independent scaling and deployment',
                            'Technology diversity possible'
                        ]
                    }
                };

                const current = info[type];
                if (this.elements.architectureInfo) {
                    this.elements.architectureInfo.innerHTML = `
                        <h4>${current.title}</h4>
                        <p><strong>Current View:</strong> ${current.subtitle}</p>
                        <ul>
                            ${current.features.map(feature => `<li>${feature}</li>`).join('')}
                        </ul>
                        <p><em>üëÜ Click components above to learn more, or start traffic to see data flow!</em></p>
                    `;
                }
            },

            // --- TRAFFIC ANIMATION METHODS ---
            startTraffic() {
                if (this.trafficRunning) return;
                this.trafficRunning = true;
                
                this.elements.startTrafficBtn.textContent = '‚ñ∂Ô∏è Traffic Running...';
                this.elements.startTrafficBtn.classList.add('active');
                
                // Activate connection arrows
                this.elements.connectionArrows?.forEach(arrow => arrow.classList.add('active'));
                
                if (this.currentArchitecture === 'monolith') {
                    this.animateMonolithTraffic();
                } else {
                    this.animateMicroservicesTraffic();
                }
                
                // Start metrics updates
                this.updateMetrics();
            },

            stopTraffic() {
                this.trafficRunning = false;
                clearInterval(this.trafficInterval);
                
                this.elements.startTrafficBtn.textContent = '‚ñ∂Ô∏è Start Traffic';
                this.elements.startTrafficBtn.classList.remove('active');
                
                // Deactivate all animations
                this.elements.connectionArrows?.forEach(arrow => arrow.classList.remove('active'));
                this.elements.monolithDots?.forEach(dot => dot.classList.remove('active'));
                this.elements.microDots?.forEach(dot => dot.classList.remove('active'));
                
                // Reset component states
                this.resetComponentStates();
            },

            animateMonolithTraffic() {
                let step = 0;
                this.trafficInterval = setInterval(() => {
                    step = (step + 1) % 5;
                    
                    switch(step) {
                        case 0:
                            this.elements.monolithClient?.classList.add('active');
                            this.elements.monolithDots?.forEach(dot => dot.classList.add('active'));
                            break;
                        case 1:
                            this.elements.monolithLB?.classList.add('active');
                            break;
                        case 2:
                            this.elements.monolithApp?.classList.add('active');
                            if (this.elements.monolithStatus) {
                                this.elements.monolithStatus.textContent = 'Processing';
                            }
                            // Randomly activate modules
                            this.elements.monolithModules?.forEach((module, index) => {
                                if (Math.random() > 0.4) {
                                    setTimeout(() => module.classList.add('active'), index * 200);
                                }
                            });
                            break;
                        case 3:
                            this.elements.monolithDB?.classList.add('active');
                            break;
                        case 4:
                            this.resetComponentStates();
                            break;
                    }
                }, 1500);
            },

            animateMicroservicesTraffic() {
                let step = 0;
                this.trafficInterval = setInterval(() => {
                    step = (step + 1) % 6;
                    
                    switch(step) {
                        case 0:
                            this.elements.microClient?.classList.add('active');
                            this.elements.microDots?.forEach(dot => dot.classList.add('active'));
                            break;
                        case 1:
                            this.elements.microGateway?.classList.add('active');
                            if (this.elements.gatewayStatus) {
                                this.elements.gatewayStatus.textContent = 'Routing';
                            }
                            this.elements.gatewayFeatures?.forEach(feature => feature.classList.add('active'));
                            break;
                        case 2:
                            // Randomly activate services
                            this.elements.serviceNodes?.forEach((node, index) => {
                                if (Math.random() > 0.3) {
                                    setTimeout(() => {
                                        node.classList.add('active');
                                        const status = node.querySelector('.service-status');
                                        if (status) status.textContent = 'Processing';
                                    }, index * 150);
                                }
                            });
                            break;
                        case 3:
                            this.elements.messageQueue?.classList.add('active');
                            break;
                        case 4:
                            // Activate databases
                            this.elements.microDatabases?.forEach((db, index) => {
                                if (Math.random() > 0.4) {
                                    setTimeout(() => db.classList.add('active'), index * 100);
                                }
                            });
                            break;
                        case 5:
                            this.resetComponentStates();
                            break;
                    }
                }, 1800);
            },

            resetComponentStates() {
                // Reset monolith states
                this.elements.monolithClient?.classList.remove('active');
                this.elements.monolithLB?.classList.remove('active');
                this.elements.monolithApp?.classList.remove('active');
                this.elements.monolithDB?.classList.remove('active');
                if (this.elements.monolithStatus) {
                    this.elements.monolithStatus.textContent = 'Ready';
                }
                this.elements.monolithModules?.forEach(module => module.classList.remove('active'));
                
                // Reset microservices states
                this.elements.microClient?.classList.remove('active');
                this.elements.microGateway?.classList.remove('active');
                this.elements.messageQueue?.classList.remove('active');
                if (this.elements.gatewayStatus) {
                    this.elements.gatewayStatus.textContent = 'Ready';
                }
                this.elements.gatewayFeatures?.forEach(feature => feature.classList.remove('active'));
                this.elements.serviceNodes?.forEach(node => {
                    node.classList.remove('active');
                    const status = node.querySelector('.service-status');
                    if (status) status.textContent = 'Ready';
                });
                this.elements.microDatabases?.forEach(db => db.classList.remove('active'));
            },

            highlightService(serviceElement) {
                // Remove active from all services
                this.elements.serviceNodes?.forEach(node => node.classList.remove('active'));
                
                // Activate clicked service
                serviceElement.classList.add('active');
                const serviceName = serviceElement.querySelector('.service-name')?.textContent || 'Service';
                const statusEl = serviceElement.querySelector('.service-status');
                if (statusEl) statusEl.textContent = 'Active';
                
                // Update info panel with service-specific information
                const serviceType = serviceElement.dataset.service;
                const descriptions = {
                    user: {
                        title: 'üë§ User Service',
                        desc: 'Handles user authentication, registration, profiles, and user management operations.',
                        features: ['JWT Authentication', 'User Registration', 'Profile Management', 'Role-based Access']
                    },
                    product: {
                        title: 'üì¶ Product Service', 
                        desc: 'Manages product catalog, inventory, pricing, and product search functionality.',
                        features: ['Product Catalog', 'Inventory Management', 'Price Management', 'Search & Filtering']
                    },
                    order: {
                        title: 'üõí Order Service',
                        desc: 'Processes new orders, manages order lifecycle, and handles order history.',
                        features: ['Order Processing', 'Order Tracking', 'Order History', 'Status Management']
                    },
                    payment: {
                        title: 'üí≥ Payment Service',
                        desc: 'Handles all payment processing, billing, and financial transactions.',
                        features: ['Payment Processing', 'Billing Management', 'Transaction History', 'Refund Processing']
                    }
                };
                
                const serviceInfo = descriptions[serviceType];
                if (serviceInfo && this.elements.architectureInfo) {
                    this.elements.architectureInfo.innerHTML = `
                        <h4>${serviceInfo.title} - Activated</h4>
                        <p><strong>Function:</strong> ${serviceInfo.desc}</p>
                        <p><strong>Key Features:</strong></p>
                        <ul>
                            ${serviceInfo.features.map(feature => `<li>${feature}</li>`).join('')}
                        </ul>
                        <p><em>In a real system, this service can be scaled independently and deployed without affecting other services.</em></p>
                    `;
                }
            },

            resetArchitecture() {
                this.stopTraffic();
                this.resetComponentStates();
                this.updateArchitectureInfo(this.currentArchitecture);
            },

            updateMetrics() {
                if (!this.trafficRunning) return;
                
                if (this.elements.responseTime) {
                    this.elements.responseTime.textContent = `${Math.floor(Math.random() * 100 + 200)}ms`;
                }
                if (this.elements.throughput) {
                    this.elements.throughput.textContent = Math.floor(Math.random() * 500 + 1000).toLocaleString();
                }
                if (this.elements.errorRate) {
                    this.elements.errorRate.textContent = `${(Math.random() * 0.1).toFixed(3)}%`;
                }
                if (this.elements.activeServices) {
                    this.elements.activeServices.textContent = Math.floor(Math.random() * 3 + 10);
                }
                
                setTimeout(() => this.updateMetrics(), 2000);
            },

            // --- EXISTING METHODS (Circuit Breaker, Gateway Demo) ---
            toggleCircuitBreaker() {
                const states = {
                    closed: { next: 'open', class: 'circuit-open', text: 'OPEN', desc: '‚ö†Ô∏è Circuit open - blocking requests' },
                    open: { next: 'half-open', class: 'circuit-half-open', text: 'HALF-OPEN', desc: 'üîç Testing with limited requests' },
                    'half-open': { next: 'closed', class: 'circuit-closed', text: 'CLOSED', desc: '‚úÖ Requests flowing normally' }
                };
                const nextState = states[this.circuitBreakerState];
                this.circuitBreakerState = nextState.next;
                if (this.elements.circuitState) {
                    this.elements.circuitState.className = `circuit-state ${nextState.class}`;
                    this.elements.circuitState.textContent = `Circuit: ${nextState.text}`;
                }
                if (this.elements.circuitDescription) {
                    this.elements.circuitDescription.textContent = nextState.desc;
                }
            },

            simulateRequest(requestType) {
                if (this.gatewayDemoRunning || !this.elements.requestLog) return;
                this.gatewayDemoRunning = true;

                const configs = {
                    login: { desc: 'üîê User Auth Request' },
                    search: { desc: 'üîç Product Search' },
                    order: { desc: 'üõí Create Order' },
                    payment: { desc: 'üí≥ Process Payment' }
                };
                const config = configs[requestType];
                if (!config) return;

                this.addLogEntry(`üì§ Client: Sending ${config.desc}`, 'info');
                
                setTimeout(() => {
                    this.addLogEntry('üöÄ Request: Routing to API Gateway', 'info');
                }, 500);

                setTimeout(() => {
                    this.addLogEntry(`üéØ Gateway: Processing ${config.desc}`, 'success');
                }, 1000);

                setTimeout(() => {
                    this.addLogEntry('‚úÖ Gateway: Request complete, returning response', 'success');
                    this.gatewayDemoRunning = false;
                }, 2000);
            },

            resetGateway() {
                if (this.elements.requestLog) {
                    this.elements.requestLog.innerHTML = '<div class="log-entry">System ready - Click buttons above to simulate requests</div>';
                }
            },

            addLogEntry(message, type = 'info') {
                if (!this.elements.requestLog) return;
                
                const timestamp = new Date().toLocaleTimeString();
                const logEntry = document.createElement('div');
                logEntry.className = `log-entry ${type}`;
                logEntry.textContent = `[${timestamp}] ${message}`;
                
                this.elements.requestLog.appendChild(logEntry);
                this.elements.requestLog.scrollTop = this.elements.requestLog.scrollHeight;

                if (this.elements.requestLog.children.length > 10) {
                    this.elements.requestLog.children[0].remove();
                }
            }
        };

        document.addEventListener('DOMContentLoaded', () => microservicesGuide.init());
    </script>
</body>
</html>