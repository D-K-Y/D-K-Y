<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Microservices Architecture: A Complete Guide to Best Practices</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            color: #333;
        }
        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 10px;
        }
        .section {
            margin-bottom: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #007bff;
        }
        .best-practice {
            background: #e8f5e8;
            border-left: 4px solid #28a745;
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
        }
        .code-block {
            background: #f4f4f4;
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 15px;
            margin: 10px 0;
            overflow-x: auto;
        }
        .pros-cons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        .pros, .cons {
            padding: 15px;
            border-radius: 8px;
        }
        .pros {
            background: #d4edda;
            border: 1px solid #c3e6cb;
        }
        .cons {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
        }
        h1, h2, h3 {
            color: #2c3e50;
        }
        ul, ol {
            padding-left: 20px;
        }
        .architecture-diagram {
            text-align: center;
            margin: 20px 0;
            padding: 20px;
            background: #fff;
            border: 2px dashed #007bff;
            border-radius: 10px;
        }

        /* Dynamic Visual Diagrams Styles */
        .interactive-diagram {
            position: relative;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            padding: 30px;
            border-radius: 15px;
            margin: 20px 0;
            overflow: hidden;
        }

        /* Enhanced service node styling */
        .service-node {
            display: inline-block;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 25px;
            border-radius: 15px;
            margin: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            min-width: 140px;
            text-align: center;
            font-weight: 500;
            border: 2px solid transparent;
        }

        .service-node:hover {
            transform: translateY(-8px) scale(1.05);
            box-shadow: 0 12px 30px rgba(0,0,0,0.2);
            border-color: rgba(255,255,255,0.3);
        }

        .service-node.active {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            animation: pulse 2s infinite;
            transform: translateY(-5px) scale(1.1);
        }

        .service-status {
            position: absolute;
            top: -5px;
            right: -5px;
            width: 15px;
            height: 15px;
            background: #28a745;
            border-radius: 50%;
            border: 2px solid white;
            animation: statusBlink 2s infinite;
        }

        .service-node.active .service-status {
            background: #ffc107;
            animation: statusActive 1s infinite;
        }

        @keyframes statusBlink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        @keyframes statusActive {
            0%, 100% { transform: scale(1); background: #ffc107; }
            50% { transform: scale(1.3); background: #ff6b6b; }
        }

        .traffic-flow {
            position: relative;
            height: 250px;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            overflow: hidden;
            border: 2px solid #dee2e6;
        }

        .traffic-node {
            position: absolute;
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 11px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            border: 3px solid white;
            transition: all 0.3s ease;
        }

        .traffic-node:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(0,0,0,0.15);
        }

        .connection-line {
            position: absolute;
            height: 3px;
            background: linear-gradient(90deg, #667eea, #764ba2);
            transform-origin: left center;
            opacity: 0.6;
            border-radius: 2px;
            animation: drawLine 2s ease-in-out infinite;
        }

        @keyframes drawLine {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 0.8; }
        }

        .data-flow {
            display: inline-block;
            width: 10px;
            height: 10px;
            background: #ff6b6b;
            border-radius: 50%;
            position: absolute;
            animation: dataFlow 3s linear infinite;
        }

        @keyframes dataFlow {
            0% { left: 0; opacity: 1; }
            100% { left: 100%; opacity: 0; }
        }

        .migration-timeline {
            position: relative;
            padding: 20px 0;
        }

        .timeline-step {
            display: flex;
            align-items: center;
            margin: 20px 0;
            opacity: 0;
            transform: translateX(-50px);
            animation: slideIn 0.6s ease forwards;
        }

        .timeline-step:nth-child(1) { animation-delay: 0.2s; }
        .timeline-step:nth-child(2) { animation-delay: 0.4s; }
        .timeline-step:nth-child(3) { animation-delay: 0.6s; }
        .timeline-step:nth-child(4) { animation-delay: 0.8s; }

        @keyframes slideIn {
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .timeline-dot {
            width: 20px;
            height: 20px;
            background: #667eea;
            border-radius: 50%;
            margin-right: 20px;
            position: relative;
            animation: dotPulse 2s infinite;
        }

        @keyframes dotPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }

        .monitoring-dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .metric-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .metric-value {
            font-size: 2em;
            font-weight: bold;
            margin: 10px 0;
            animation: countUp 2s ease-out;
        }

        @keyframes countUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .loading-bar {
            height: 4px;
            background: rgba(255,255,255,0.3);
            border-radius: 2px;
            overflow: hidden;
            margin-top: 10px;
        }

        .loading-progress {
            height: 100%;
            background: #38ef7d;
            border-radius: 2px;
            animation: loading 3s ease-in-out infinite;
        }

        @keyframes loading {
            0% { width: 0%; }
            50% { width: 100%; }
            100% { width: 0%; }
        }

        .traffic-flow {
            position: relative;
            height: 200px;
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            overflow: hidden;
        }

        .traffic-node {
            position: absolute;
            width: 60px;
            height: 60px;
            background: #667eea;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 12px;
            text-align: center;
        }

        .traffic-packet {
            position: absolute;
            width: 8px;
            height: 8px;
            background: #ff6b6b;
            border-radius: 50%;
            animation: trafficMove 4s linear infinite;
            animation-play-state: paused; /* Start paused */
            opacity: 0; /* Start hidden */
        }

        .traffic-packet.active {
            opacity: 1;
            animation-play-state: running;
        }

        @keyframes trafficMove {
            0% { left: 15%; top: 45%; opacity: 1; }
            25% { left: 50%; top: 15%; opacity: 1; }
            50% { left: 75%; top: 75%; opacity: 1; }
            75% { left: 25%; top: 75%; opacity: 1; }
            100% { left: 15%; top: 45%; opacity: 1; }
        }

        .control-panel {
            text-align: center;
            margin: 20px 0;
        }

        .control-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            margin: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .control-btn:hover {
            background: #764ba2;
            transform: translateY(-2px);
        }

        .circuit-breaker-demo {
            position: relative;
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }

        .circuit-state {
            display: inline-block;
            padding: 10px 20px;
            border-radius: 20px;
            margin: 10px;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .circuit-closed {
            background: #d4edda;
            color: #155724;
        }

        .circuit-open {
            background: #f8d7da;
            color: #721c24;
            animation: warning 1s infinite alternate;
        }

        .circuit-half-open {
            background: #fff3cd;
            color: #856404;
        }

        @keyframes warning {
            from { opacity: 1; }
            to { opacity: 0.6; }
        }

        /* Interactive Gateway Pattern Styles */
        .interactive-gateway-demo {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
            border: 2px solid #dee2e6;
        }

        .gateway-controls {
            text-align: center;
            margin-bottom: 25px;
            padding: 15px;
            background: rgba(255,255,255,0.8);
            border-radius: 10px;
        }

        .gateway-flow-container {
            display: grid;
            grid-template-columns: 1fr 80px 1fr 80px 1fr;
            grid-template-rows: 1fr;
            align-items: center;
            gap: 20px;
            margin: 30px 0;
            min-height: 300px;
        }

        .gateway-client {
            text-align: center;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 15px;
            transition: all 0.3s ease;
        }

        .gateway-client.active {
            transform: scale(1.05);
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
        }

        .client-icon {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .client-label {
            font-weight: bold;
            margin-bottom: 8px;
        }

        .request-info {
            font-size: 0.9em;
            opacity: 0.9;
        }

        .gateway-arrow {
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .arrow-line {
            height: 4px;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            border-radius: 2px;
            width: 60px;
            position: relative;
            opacity: 0.6;
            transition: all 0.3s ease;
        }

        .arrow-line.active {
            opacity: 1;
            animation: arrowPulse 1s ease-in-out;
        }

        @keyframes arrowPulse {
            0%, 100% { transform: scaleX(1); }
            50% { transform: scaleX(1.2); }
        }

        .arrow-head {
            color: #667eea;
            font-size: 1.5em;
            margin-left: 5px;
            transition: all 0.3s ease;
        }

        .arrow-head.active {
            animation: arrowMove 1s ease-in-out;
        }

        @keyframes arrowMove {
            0%, 100% { transform: translateX(0); }
            50% { transform: translateX(10px); }
        }

        .request-packet, .service-packet {
            position: absolute;
            width: 12px;
            height: 12px;
            background: #ff6b6b;
            border-radius: 50%;
            opacity: 0;
            transform: translateX(-50%);
        }

        .request-packet.moving {
            opacity: 1;
            animation: packetMove 1.5s ease-in-out;
        }

        .service-packet.moving {
            opacity: 1;
            animation: packetMove 1s ease-in-out 0.5s;
        }

        @keyframes packetMove {
            0% { left: 0%; opacity: 1; }
            100% { left: 100%; opacity: 0; }
        }

        .api-gateway {
            text-align: center;
            padding: 20px;
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            color: white;
            border-radius: 15px;
            transition: all 0.3s ease;
        }

        .api-gateway.processing {
            animation: gatewayPulse 2s ease-in-out;
        }

        @keyframes gatewayPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); box-shadow: 0 8px 25px rgba(0,0,0,0.2); }
        }

        .gateway-icon {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .gateway-label {
            font-weight: bold;
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        .gateway-functions {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
            margin-bottom: 10px;
        }

        .function-item {
            background: rgba(255,255,255,0.2);
            padding: 5px 8px;
            border-radius: 8px;
            font-size: 0.8em;
            transition: all 0.3s ease;
        }

        .function-item.active {
            background: rgba(255,255,255,0.4);
            animation: functionBlink 0.5s ease-in-out;
        }

        @keyframes functionBlink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }

        .gateway-status {
            font-size: 0.9em;
            font-weight: bold;
            opacity: 0.9;
        }

        .service-arrows {
            display: flex;
            flex-direction: column;
            gap: 25px;
            align-items: center;
        }

        .service-arrow {
            position: relative;
            display: flex;
            align-items: center;
            width: 60px;
        }

        .gateway-services {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .gateway-service {
            display: flex;
            align-items: center;
            padding: 15px;
            background: rgba(255,255,255,0.9);
            border-radius: 10px;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .gateway-service.active {
            border-color: #28a745;
            background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%);
            transform: translateX(5px);
        }

        .service-icon {
            font-size: 1.5em;
            margin-right: 10px;
        }

        .service-name {
            font-weight: bold;
            flex-grow: 1;
        }

        .service-status {
            font-size: 0.8em;
            color: #666;
            padding: 3px 8px;
            background: #f8f9fa;
            border-radius: 12px;
        }

        .gateway-service.active .service-status {
            background: #28a745;
            color: white;
        }

        .request-log {
            margin-top: 25px;
            background: rgba(255,255,255,0.9);
            border-radius: 10px;
            padding: 15px;
        }

        .request-log h5 {
            margin: 0 0 10px 0;
            color: #2c3e50;
        }

        .log-content {
            max-height: 150px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 0.85em;
        }

        .log-entry {
            padding: 5px 0;
            border-bottom: 1px solid #eee;
            color: #333;
        }

        .log-entry:last-child {
            border-bottom: none;
        }

        .log-entry.success {
            color: #28a745;
        }

        .log-entry.error {
            color: #dc3545;
        }

        .log-entry.info {
            color: #007bff;
        }

        .gateway-features {
            margin-top: 25px;
            background: rgba(255,255,255,0.9);
            border-radius: 10px;
            padding: 20px;
        }

        .gateway-features h5 {
            margin: 0 0 15px 0;
            color: #2c3e50;
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .feature-card {
            text-align: center;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .feature-card.highlight {
            border-color: #667eea;
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
            transform: translateY(-5px);
        }

        .feature-icon {
            font-size: 2em;
            margin-bottom: 8px;
        }

        .feature-name {
            font-weight: bold;
            margin-bottom: 5px;
            color: #2c3e50;
        }

        .feature-desc {
            font-size: 0.9em;
            color: #666;
        }

        /* Mobile responsiveness */
        @media (max-width: 768px) {
            .gateway-flow-container {
                grid-template-columns: 1fr;
                grid-template-rows: auto 40px auto 40px auto;
                gap: 15px;
            }
            
            .gateway-arrow {
                transform: rotate(90deg);
            }
            
            .service-arrows {
                flex-direction: row;
                justify-content: center;
            }
            
            .service-arrow {
                transform: rotate(90deg);
            }
            
            .feature-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Microservices Architecture: A Complete Guide</h1>
        <p>Best Practices, Patterns, and Implementation Strategies</p>
        <small>Published: June 21, 2025</small>
    </div>

    <div class="section">
        <h2>üìñ Table of Contents</h2>
        <ol>
            <li><a href="#introduction">Introduction to Microservices</a></li>
            <li><a href="#architecture">Microservices Architecture</a></li>
            <li><a href="#benefits">Benefits and Challenges</a></li>
            <li><a href="#best-practices">Best Practices</a></li>
            <li><a href="#patterns">Design Patterns</a></li>
            <li><a href="#technologies">Technology Stack</a></li>
            <li><a href="#implementation">Implementation Guide</a></li>
            <li><a href="#migration">Migration from Monolith</a></li>
            <li><a href="#monitoring">Monitoring and Observability</a></li>
            <li><a href="#conclusion">Conclusion</a></li>
        </ol>
    </div>

    <div class="section" id="introduction">
        <h2>üöÄ Introduction to Microservices</h2>
        <p>Microservices architecture is a software development approach that structures an application as a collection of loosely coupled, independently deployable services. Each service is fine-grained and implements a specific business capability.</p>
        
        <h3>What Are Microservices?</h3>
        <p>Microservices break down a large application into smaller, manageable pieces that:</p>
        <ul>
            <li>Run in their own process</li>
            <li>Communicate via well-defined APIs</li>
            <li>Can be developed, deployed, and scaled independently</li>
            <li>Are organized around business capabilities</li>
            <li>Can use different technologies and databases</li>
        </ul>
    </div>

    <div class="section" id="architecture">
        <h2>üèóÔ∏è Microservices Architecture</h2>
        
        <div class="interactive-diagram">
            <h3>Interactive Microservices Architecture</h3>
            <div class="control-panel">
                <button class="control-btn" onclick="startDemo()">‚ñ∂Ô∏è Start Demo</button>
                <button class="control-btn" onclick="stopDemo()">‚èπÔ∏è Stop Demo</button>
                <button class="control-btn" onclick="resetDemo()">üîÑ Reset</button>
            </div>
            
            <div class="traffic-flow">
                <!-- Main architectural nodes -->
                <div class="traffic-node" style="left: 10%; top: 40%;">
                    <div>Client</div>
                </div>
                <div class="traffic-node" style="left: 50%; top: 10%;">
                    <div>Gateway</div>
                </div>
                <div class="traffic-node" style="left: 25%; top: 70%;">
                    <div>User Svc</div>
                </div>
                <div class="traffic-node" style="left: 75%; top: 70%;">
                    <div>Order Svc</div>
                </div>
                
                <!-- Traffic packets -->
                <div class="traffic-packet" id="packet1"></div>
                <div class="traffic-packet" id="packet2" style="animation-delay: 1s;"></div>
                <div class="traffic-packet" id="packet3" style="animation-delay: 2s;"></div>
                
                <!-- Connection lines (optional visual enhancement) -->
                <div class="connection-line" style="left: 15%; top: 45%; width: 30%; transform: rotate(-25deg);"></div>
                <div class="connection-line" style="left: 55%; top: 15%; width: 25%; transform: rotate(45deg);"></div>
            </div>
            
            <!-- Interactive Service Nodes - Now properly aligned -->
            <div style="text-align: center; margin-top: 30px;">
                <div style="display: flex; justify-content: space-around; align-items: center; flex-wrap: wrap; max-width: 800px; margin: 0 auto;">
                    <div class="service-node" onclick="highlightService(this, 'user')" data-service="user">
                        üë§ User Service
                        <div class="service-status">‚óè</div>
                    </div>
                    <div class="service-node" onclick="highlightService(this, 'product')" data-service="product">
                        üì¶ Product Service
                        <div class="service-status">‚óè</div>
                    </div>
                    <div class="service-node" onclick="highlightService(this, 'order')" data-service="order">
                        üõí Order Service
                        <div class="service-status">‚óè</div>
                    </div>
                    <div class="service-node" onclick="highlightService(this, 'payment')" data-service="payment">
                        üí≥ Payment Service
                        <div class="service-status">‚óè</div>
                    </div>
                </div>
                
                <!-- Service explanation -->
                <div id="serviceInfo" style="margin-top: 20px; padding: 15px; background: rgba(255,255,255,0.9); border-radius: 10px; min-height: 60px;">
                    <p><strong>üí° Click on any service above to see it activate!</strong></p>
                    <p>Each service represents an independent microservice that can be scaled and deployed separately.</p>
                </div>
            </div>
        </div>

        <div class="best-practice">
            <h3>üìä How the Interactive Diagram Works</h3>
            <p>The interactive diagram above demonstrates key microservices concepts through visual animations and interactions:</p>
            
            <h4>üéØ Visual Components Explained:</h4>
            <ul>
                <li><strong>üî¥ Red Moving Dots (Traffic Packets):</strong> Represent HTTP requests/data flowing through your system</li>
                <li><strong>üîµ Blue Circular Nodes:</strong> Represent different components in your architecture:
                    <ul>
                        <li><strong>Client:</strong> Web browser, mobile app, or API consumer</li>
                        <li><strong>Gateway:</strong> API Gateway that routes requests</li>
                        <li><strong>User Svc:</strong> User Service handling authentication</li>
                        <li><strong>Order Svc:</strong> Order Service managing purchases</li>
                    </ul>
                </li>
                <li><strong>üü¢ Green Service Nodes:</strong> Individual microservices you can interact with</li>
            </ul>

            <h4>üéÆ Interactive Features:</h4>
            <ol>
                <li><strong>‚ñ∂Ô∏è Start Demo:</strong> Begins the animation showing request flow patterns</li>
                <li><strong>‚èπÔ∏è Stop Demo:</strong> Pauses the traffic animation</li>
                <li><strong>üîÑ Reset:</strong> Reloads the page to restart everything</li>
                <li><strong>Click Service Nodes:</strong> Highlight individual services to see them "activate"</li>
            </ol>

            <h4>üìà What the Animation Shows:</h4>
            <div class="code-block">
                <pre>
Request Flow Pattern:
1. Client (10%, 50%) ‚Üí Gateway (50%, 10%)
2. Gateway ‚Üí User Service (30%, 70%) 
3. Gateway ‚Üí Order Service (70%, 70%)
4. Services process and respond back

// The percentages represent position coordinates
// showing how requests bounce between services
                </pre>
            </div>

            <h4>üéØ Real-World Concepts Demonstrated:</h4>
            <ul>
                <li><strong>Request Routing:</strong> How API Gateway distributes requests</li>
                <li><strong>Service Communication:</strong> Inter-service data exchange</li>
                <li><strong>Load Distribution:</strong> Multiple requests handled simultaneously</li>
                <li><strong>Service Independence:</strong> Each service can be clicked/activated separately</li>
                <li><strong>Scalability:</strong> Multiple packets show concurrent request handling</li>
            </ul>
        </div>

        <div class="best-practice">
            <h3>üîç Try This Exercise:</h3>
            <ol>
                <li>Click "‚ñ∂Ô∏è Start Demo" to see request flow</li>
                <li>Click on different service nodes (üë§ User, üì¶ Product, etc.) to see them activate</li>
                <li>Notice how the red dots represent real API calls in your system</li>
                <li>Observe that services can be activated independently - this shows microservices autonomy!</li>
            </ol>
            
            <div class="code-block">
                <pre>
// What happens when you click a service:
function highlightService(element, serviceName) {
    // 1. Remove active state from other services
    document.querySelectorAll('.service-node').forEach(node => {
        node.classList.remove('active');
    });
    
    // 2. Activate clicked service (turns green with pulse animation)
    element.classList.add('active');
    
    // 3. In real systems, this might:
    // - Scale up this specific service
    // - Show service health metrics
    // - Display service logs
    // - Route more traffic to this service
}
                </pre>
            </div>
        </div>

        <div class="best-practice">
            <h3>üèóÔ∏è Architecture Pattern Visualization</h3>
            <p>This diagram specifically demonstrates the <strong>API Gateway Pattern</strong>:</p>
            
            <div class="interactive-gateway-demo">
                <h4>Interactive API Gateway Pattern Demo</h4>
                
                <!-- Gateway Demo Controls -->
                <div class="gateway-controls">
                    <button class="control-btn" onclick="simulateRequest('login')">üîê Login Request</button>
                    <button class="control-btn" onclick="simulateRequest('search')">üîç Search Products</button>
                    <button class="control-btn" onclick="simulateRequest('order')">üõí Create Order</button>
                    <button class="control-btn" onclick="simulateRequest('payment')">üí≥ Process Payment</button>
                    <button class="control-btn" onclick="resetGateway()">üîÑ Reset</button>
                </div>
                
                <!-- Interactive Gateway Diagram -->
                <div class="gateway-flow-container">
                    <!-- Client Section -->
                    <div class="gateway-client" id="gatewayClient">
                        <div class="client-icon">üë§</div>
                        <div class="client-label">Client Application</div>
                        <div class="request-info" id="requestInfo">Click a button to send request</div>
                    </div>
                    
                    <!-- Arrow from Client to Gateway -->
                    <div class="gateway-arrow" id="clientToGateway">
                        <div class="arrow-line"></div>
                        <div class="arrow-head">‚ñ∂</div>
                        <div class="request-packet" id="requestPacket"></div>
                    </div>
                    
                    <!-- API Gateway -->
                    <div class="api-gateway" id="apiGateway">
                        <div class="gateway-icon">üö™</div>
                        <div class="gateway-label">API Gateway</div>
                        <div class="gateway-functions">
                            <div class="function-item" id="authCheck">üîê Auth</div>
                            <div class="function-item" id="rateLimit">‚è±Ô∏è Rate Limit</div>
                            <div class="function-item" id="routing">üéØ Routing</div>
                            <div class="function-item" id="logging">üìù Logging</div>
                        </div>
                        <div class="gateway-status" id="gatewayStatus">Ready</div>
                    </div>
                    
                    <!-- Arrows from Gateway to Services -->
                    <div class="service-arrows">
                        <div class="service-arrow" id="toUserService">
                            <div class="arrow-line"></div>
                            <div class="arrow-head">‚ñ∂</div>
                            <div class="service-packet" id="userPacket"></div>
                        </div>
                        <div class="service-arrow" id="toProductService">
                            <div class="arrow-line"></div>
                            <div class="arrow-head">‚ñ∂</div>
                            <div class="service-packet" id="productPacket"></div>
                        </div>
                        <div class="service-arrow" id="toOrderService">
                            <div class="arrow-line"></div>
                            <div class="arrow-head">‚ñ∂</div>
                            <div class="service-packet" id="orderPacket"></div>
                        </div>
                        <div class="service-arrow" id="toPaymentService">
                            <div class="arrow-line"></div>
                            <div class="arrow-head">‚ñ∂</div>
                            <div class="service-packet" id="paymentPacket"></div>
                        </div>
                    </div>
                    
                    <!-- Microservices -->
                    <div class="gateway-services">
                        <div class="gateway-service" id="userServiceGW">
                            <div class="service-icon">üë§</div>
                            <div class="service-name">User Service</div>
                            <div class="service-status">Idle</div>
                        </div>
                        <div class="gateway-service" id="productServiceGW">
                            <div class="service-icon">üì¶</div>
                            <div class="service-name">Product Service</div>
                            <div class="service-status">Idle</div>
                        </div>
                        <div class="gateway-service" id="orderServiceGW">
                            <div class="service-icon">üõí</div>
                            <div class="service-name">Order Service</div>
                            <div class="service-status">Idle</div>
                        </div>
                        <div class="gateway-service" id="paymentServiceGW">
                            <div class="service-icon">üí≥</div>
                            <div class="service-name">Payment Service</div>
                            <div class="service-status">Idle</div>
                        </div>
                    </div>
                </div>
                
                <!-- Request Log -->
                <div class="request-log">
                    <h5>üìã Request Log</h5>
                    <div class="log-content" id="requestLog">
                        <div class="log-entry">System ready - Click buttons above to simulate requests</div>
                    </div>
                </div>
                
                <!-- Gateway Features Explanation -->
                <div class="gateway-features">
                    <h5>üéØ API Gateway Features Demonstrated:</h5>
                    <div class="feature-grid">
                        <div class="feature-card" id="authFeature">
                            <div class="feature-icon">üîê</div>
                            <div class="feature-name">Authentication</div>
                            <div class="feature-desc">Validates user credentials</div>
                        </div>
                        <div class="feature-card" id="rateLimitFeature">
                            <div class="feature-icon">‚è±Ô∏è</div>
                            <div class="feature-name">Rate Limiting</div>
                            <div class="feature-desc">Controls request frequency</div>
                        </div>
                        <div class="feature-card" id="routingFeature">
                            <div class="feature-icon">üéØ</div>
                            <div class="feature-name">Request Routing</div>
                            <div class="feature-desc">Directs to correct service</div>
                        </div>
                        <div class="feature-card" id="loggingFeature">
                            <div class="feature-icon">üìù</div>
                            <div class="feature-name">Logging & Monitoring</div>
                            <div class="feature-desc">Tracks all traffic</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <h3>Key Components</h3>
        <ul>
            <li><strong>API Gateway:</strong> Single entry point for all client requests</li>
            <li><strong>Service Registry:</strong> Directory of available services</li>
            <li><strong>Load Balancer:</strong> Distributes requests across service instances</li>
            <li><strong>Configuration Server:</strong> Centralized configuration management</li>
            <li><strong>Message Broker:</strong> Enables asynchronous communication</li>
        </ul>
    </div>

    <div class="section" id="benefits">
        <h2>‚öñÔ∏è Benefits and Challenges</h2>
        
        <div class="pros-cons">
            <div class="pros">
                <h3>‚úÖ Benefits</h3>
                <ul>
                    <li><strong>Independent Deployment:</strong> Deploy services separately</li>
                    <li><strong>Technology Diversity:</strong> Use different tech stacks</li>
                    <li><strong>Scalability:</strong> Scale individual services</li>
                    <li><strong>Fault Isolation:</strong> Failures don't affect entire system</li>
                    <li><strong>Team Autonomy:</strong> Small teams can work independently</li>
                    <li><strong>Faster Development:</strong> Parallel development possible</li>
                </ul>
            </div>
            
            <div class="cons">
                <h3>‚ùå Challenges</h3>
                <ul>
                    <li><strong>Complexity:</strong> Distributed system complexity</li>
                    <li><strong>Network Latency:</strong> Inter-service communication overhead</li>
                    <li><strong>Data Consistency:</strong> Managing distributed transactions</li>
                    <li><strong>Testing:</strong> Integration testing complexity</li>
                    <li><strong>Monitoring:</strong> Observing distributed systems</li>
                    <li><strong>Security:</strong> Multiple attack surfaces</li>
                </ul>
            </div>
        </div>
    </div>

    <div class="section" id="best-practices">
        <h2>üéØ Best Practices</h2>

        <div class="best-practice">
            <h3>1. Single Responsibility Principle</h3>
            <p>Each microservice should have a single reason to change and should be responsible for one business capability.</p>
            <div class="code-block">
                <strong>Good:</strong> UserService handles user registration, authentication, and profile management<br>
                <strong>Bad:</strong> UserService handles users, orders, and inventory management
            </div>
        </div>

        <div class="best-practice">
            <h3>2. Database Per Service</h3>
            <p>Each service should own its data and database. Avoid shared databases between services.</p>
            <div class="code-block">
                <pre>
// Each service has its own database
UserService ‚Üí UserDB (PostgreSQL)
ProductService ‚Üí ProductDB (MongoDB)
OrderService ‚Üí OrderDB (MySQL)
                </pre>
            </div>
        </div>

        <div class="best-practice">
            <h3>3. API Design and Versioning</h3>
            <p>Design APIs with versioning in mind to ensure backward compatibility.</p>
            <div class="code-block">
                <pre>
// RESTful API versioning
GET /api/v1/users
GET /api/v2/users

// Semantic versioning for services
user-service:1.2.3
product-service:2.0.1
                </pre>
            </div>
        </div>

        <div class="best-practice">
            <h3>4. Circuit Breaker Pattern</h3>
            <p>Implement circuit breakers to prevent cascading failures.</p>
            <div class="code-block">
                <pre>
// Example with resilience4j
@CircuitBreaker(name = "product-service")
public Product getProduct(String id) {
    return productServiceClient.getProduct(id);
}
                </pre>
            </div>
        </div>

        <div class="best-practice">
            <h3>5. Asynchronous Communication</h3>
            <p>Use message queues and event-driven architecture for loose coupling.</p>
            <div class="code-block">
                <pre>
// Event-driven communication
OrderCreated ‚Üí [Message Queue] ‚Üí InventoryService
                              ‚Üí PaymentService
                              ‚Üí ShippingService
                </pre>
            </div>
        </div>

        <div class="best-practice">
            <h3>6. Health Checks and Monitoring</h3>
            <p>Implement health checks and comprehensive monitoring for all services.</p>
            <div class="code-block">
                <pre>
// Spring Boot Actuator health endpoint
GET /actuator/health
{
  "status": "UP",
  "components": {
    "db": {"status": "UP"},
    "redis": {"status": "UP"}
  }
}
                </pre>
            </div>
        </div>

        <div class="best-practice">
            <h3>7. Security Best Practices</h3>
            <ul>
                <li>Use JWT tokens for authentication</li>
                <li>Implement OAuth 2.0 for authorization</li>
                <li>Encrypt sensitive data in transit and at rest</li>
                <li>Use API rate limiting</li>
                <li>Implement proper logging without sensitive data</li>
            </ul>
        </div>

        <div class="best-practice">
            <h3>8. Configuration Management</h3>
            <p>Externalize configuration and use environment-specific settings.</p>
            <div class="code-block">
                <pre>
// Environment-specific configuration
development:
  database.url: localhost:5432
  
production:
  database.url: prod-db.company.com:5432
                </pre>
            </div>
        </div>
    </div>

    <div class="section" id="patterns">
        <h2>üé® Design Patterns</h2>

        <h3>Circuit Breaker Pattern Demo</h3>
        <div class="circuit-breaker-demo">
            <div class="control-panel">
                <button class="control-btn" onclick="toggleCircuitBreaker()">Toggle Circuit Breaker</button>
            </div>
            <div id="circuitState" class="circuit-state circuit-closed">Circuit: CLOSED</div>
            <div id="circuitDescription">‚úÖ Requests flowing normally</div>
        </div>

        <div class="code-block">
            <pre>
// Choreography-based saga
1. OrderService creates order ‚Üí OrderCreated event
2. PaymentService processes payment ‚Üí PaymentProcessed event
3. InventoryService reserves items ‚Üí ItemsReserved event
4. ShippingService schedules delivery ‚Üí DeliveryScheduled event
            </pre>
        </div>
    </div>

    <div class="section" id="monitoring">
        <h2>üìä Monitoring and Observability</h2>
        
        <h3>Live Monitoring Dashboard</h3>
        <div class="monitoring-dashboard">
            <div class="metric-card">
                <div>Response Time</div>
                <div class="metric-value" id="responseTime">245ms</div>
                <div class="loading-bar">
                    <div class="loading-progress"></div>
                </div>
            </div>
            <div class="metric-card">
                <div>Throughput</div>
                <div class="metric-value" id="throughput">1,250</div>
                <div class="loading-bar">
                    <div class="loading-progress" style="animation-delay: 0.5s;"></div>
                </div>
            </div>
            <div class="metric-card">
                <div>Error Rate</div>
                <div class="metric-value" id="errorRate">0.02%</div>
                <div class="loading-bar">
                    <div class="loading-progress" style="animation-delay: 1s;"></div>
                </div>
            </div>
            <div class="metric-card">
                <div>Active Services</div>
                <div class="metric-value" id="activeServices">12</div>
                <div class="loading-bar">
                    <div class="loading-progress" style="animation-delay: 1.5s;"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="section" id="migration">
        <h2>üîÑ Migration Timeline</h2>
        <div class="migration-timeline">
            <div class="timeline-step">
                <div class="timeline-dot"></div>
                <div><strong>Phase 1:</strong> Assessment & Planning (Month 1-2)</div>
            </div>
            <div class="timeline-step">
                <div class="timeline-dot"></div>
                <div><strong>Phase 2:</strong> Infrastructure Setup (Month 2-3)</div>
            </div>
            <div class="timeline-step">
                <div class="timeline-dot"></div>
                <div><strong>Phase 3:</strong> First Service Migration (Month 3-4)</div>
            </div>
            <div class="timeline-step">
                <div class="timeline-dot"></div>
                <div><strong>Phase 4:</strong> Full Migration (Month 4-12)</div>
            </div>
        </div>
    </div>

    <div class="section" id="implementation">
        <h2>üîß Implementation Guide</h2>

        <h3>Step 1: Start with a Monolith</h3>
        <p>Begin with a well-structured monolith and gradually extract services.</p>

        <h3>Step 2: Identify Service Boundaries</h3>
        <p>Use Domain-Driven Design (DDD) to identify bounded contexts.</p>
        <div class="code-block">
            <pre>
// Example service boundaries
User Management Context ‚Üí UserService
Product Catalog Context ‚Üí ProductService
Order Management Context ‚Üí OrderService
Payment Context ‚Üí PaymentService
            </pre>
        </div>

        <h3>Step 3: Setup Infrastructure</h3>
        <div class="code-block">
            <pre>
# Docker Compose example
version: '3.8'
services:
  api-gateway:
    image: nginx:alpine
    ports: ["80:80"]
    
  user-service:
    build: ./user-service
    environment:
      - DB_HOST=user-db
    depends_on: [user-db]
    
  user-db:
    image: postgres:13
    environment:
      - POSTGRES_DB=users
            </pre>
        </div>

        <h3>Step 4: Implement Service Communication</h3>
        <div class="code-block">
            <pre>
// REST API communication
@RestController
public class UserController {
    
    @Autowired
    private OrderServiceClient orderServiceClient;
    
    @GetMapping("/users/{id}/orders")
    public List&lt;Order&gt; getUserOrders(@PathVariable String id) {
        return orderServiceClient.getOrdersByUserId(id);
    }
}
            </pre>
        </div>

        <h3>Step 5: Add Observability</h3>
        <div class="code-block">
            <pre>
// Logging configuration
logging:
  level:
    com.company: DEBUG
  pattern:
    console: "%d{HH:mm:ss.SSS} [%thread] %-5level [%X{traceId}] %logger{36} - %msg%n"
            </pre>
        </div>
    </div>

    <div class="section" id="migration">
        <h2>üîÑ Migrating from Monolith to Microservices</h2>
        
        <p>Migration from a monolithic architecture to microservices is a complex process that requires careful planning and execution. Here's a comprehensive guide to help you through this transformation.</p>

        <h3>üìã Pre-Migration Assessment</h3>
        
        <div class="best-practice">
            <h4>1. Evaluate Your Current State</h4>
            <ul>
                <li><strong>Application Size:</strong> Is your monolith large enough to justify the complexity?</li>
                <li><strong>Team Size:</strong> Do you have multiple teams that could own different services?</li>
                <li><strong>Deployment Frequency:</strong> Are you deploying frequently enough to benefit from independent deployments?</li>
                <li><strong>Scalability Needs:</strong> Do different parts of your application have different scaling requirements?</li>
            </ul>
        </div>

        <div class="code-block">
            <pre>
// Assessment checklist
‚úÖ Application has >100,000 lines of code
‚úÖ Multiple teams (3+) working on the codebase
‚úÖ Different modules have different scaling needs
‚úÖ Deployment takes >30 minutes
‚úÖ Bug in one module affects entire application
‚úÖ Technology stack limitations holding back innovation
            </pre>
        </div>

        <h3>üó∫Ô∏è Migration Strategies</h3>

        <h4>1. Strangler Fig Pattern</h4>
        <p>Gradually replace parts of the monolith by routing traffic to new microservices.</p>
        
        <div class="architecture-diagram">
            <pre>
Phase 1: Start with Proxy
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Client  ‚îÇ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ  Proxy  ‚îÇ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ  Monolith   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

Phase 2: Extract First Service
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Client  ‚îÇ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ  Proxy  ‚îÇ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ  Monolith   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                     ‚îÇ        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ UserService ‚îÇ
                              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

Phase 3: Continue Migration
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Client  ‚îÇ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ  Proxy  ‚îÇ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ  Monolith   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                     ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ UserService ‚îÇ
                     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇOrderService ‚îÇ
            </pre>
        </div>

        <h4>2. Database-First Approach</h4>
        <p>Start by separating databases, then extract services.</p>
        
        <div class="code-block">
            <pre>
// Step 1: Identify data boundaries
Users Table     ‚Üí User Database
Products Table  ‚Üí Product Database  
Orders Table    ‚Üí Order Database

// Step 2: Create separate schemas
CREATE SCHEMA user_schema;
CREATE SCHEMA product_schema;
CREATE SCHEMA order_schema;

// Step 3: Migrate data gradually
-- Use database views for transition period
CREATE VIEW legacy_users AS SELECT * FROM user_schema.users;
            </pre>
        </div>

        <h4>3. Feature-First Approach</h4>
        <p>Extract complete features as microservices.</p>

        <div class="best-practice">
            <h4>Migration Phases</h4>
            <ol>
                <li><strong>Phase 1:</strong> User Authentication & Management</li>
                <li><strong>Phase 2:</strong> Product Catalog & Search</li>
                <li><strong>Phase 3:</strong> Order Processing</li>
                <li><strong>Phase 4:</strong> Payment Processing</li>
                <li><strong>Phase 5:</strong> Notification Service</li>
            </ol>
        </div>

        <h3>üõ†Ô∏è Step-by-Step Migration Process</h3>

        <div class="best-practice">
            <h4>Step 1: Modularize the Monolith</h4>
            <p>Before extracting services, ensure your monolith is well-modularized.</p>
            <div class="code-block">
                <pre>
// Before: Tightly coupled code
public class OrderController {
    public void createOrder() {
        // User validation logic
        // Inventory check logic  
        // Payment processing logic
        // Email notification logic
    }
}

// After: Modularized monolith
public class OrderController {
    @Autowired UserService userService;
    @Autowired InventoryService inventoryService;
    @Autowired PaymentService paymentService;
    @Autowired NotificationService notificationService;
    
    public void createOrder() {
        userService.validateUser();
        inventoryService.checkAvailability();
        paymentService.processPayment();
        notificationService.sendConfirmation();
    }
}
                </pre>
            </div>
        </div>

        <div class="best-practice">
            <h4>Step 2: Identify Service Boundaries</h4>
            <p>Use Domain-Driven Design principles to identify bounded contexts.</p>
            <div class="code-block">
                <pre>
// Analyze your monolith structure
src/
‚îú‚îÄ‚îÄ user/              ‚Üí User Service
‚îÇ   ‚îú‚îÄ‚îÄ UserController
‚îÇ   ‚îú‚îÄ‚îÄ UserService
‚îÇ   ‚îî‚îÄ‚îÄ UserRepository
‚îú‚îÄ‚îÄ product/           ‚Üí Product Service
‚îÇ   ‚îú‚îÄ‚îÄ ProductController
‚îÇ   ‚îú‚îÄ‚îÄ ProductService
‚îÇ   ‚îî‚îÄ‚îÄ ProductRepository
‚îú‚îÄ‚îÄ order/             ‚Üí Order Service
‚îÇ   ‚îú‚îÄ‚îÄ OrderController
‚îÇ   ‚îú‚îÄ‚îÄ OrderService
‚îÇ   ‚îî‚îÄ‚îÄ OrderRepository
‚îî‚îÄ‚îÄ shared/            ‚Üí Shared libraries
    ‚îú‚îÄ‚îÄ CommonUtils
    ‚îî‚îÄ‚îÄ ValidationUtils
                </pre>
            </div>
        </div>

        <div class="best-practice">
            <h4>Step 3: Extract Your First Service</h4>
            <p>Start with the service that has the least dependencies.</p>
            <div class="code-block">
                <pre>
// 1. Create new microservice project
mkdir user-service
cd user-service
spring init --dependencies=web,data-jpa,postgresql user-service

// 2. Copy relevant code from monolith
cp monolith/src/user/* user-service/src/main/java/com/company/user/

# 3. Update configuration
application.yml:
spring:
  datasource:
    url: jdbc:postgresql://localhost:5432/users
    username: user
    password: password

# 4. Register service in service registry (e.g., Eureka)
eureka:
  client:
    register-with-eureka: true
    fetch-registry: true
                </pre>
            </div>
        </div>

        <div class="best-practice">
            <h4>Step 4: Implement API Gateway</h4>
            <p>Set up an API gateway to handle routing and composition.</p>
            <div class="code-block">
                <pre>
# API Gateway configuration (e.g., Spring Cloud Gateway)
spring:
  cloud:
    gateway:
      routes:
        - id: user-service
          uri: lb://USER-SERVICE
          predicates:
            - Path=/users/**
        - id: product-service
          uri: lb://PRODUCT-SERVICE
          predicates:
            - Path=/products/**
                </pre>
            </div>
        </div>

        <div class="best-practice">
            <h4>Step 5: Implement Service Discovery</h4>
            <p>Enable services to discover each other via a service registry.</p>
            <div class="code-block">
                <pre>
# Eureka Server configuration
spring:
  application:
    name: eureka-server
  cloud:
    discovery:
      enabled: true
      client:
        register-with-eureka: true
        fetch-registry: true
                </pre>
            </div>
        </div>

        <div class="best-practice">
            <h4>Step 6: Implement Centralized Configuration</h4>
            <p>Use a configuration server to manage service configurations.</p>
            <div class="code-block">
                <pre>
# Spring Cloud Config Server configuration
spring:
  cloud:
    config:
      server:
        git:
          uri: https://github.com/your-repo/config-repo
          clone-on-start: true
                </pre>
            </div>
        </div>

        <div class="best-practice">
            <h4>Step 7: Implement Monitoring and Logging</h4>
            <p>Set up centralized logging and monitoring for all services.</p>
            <div class="code-block">
                <pre>
# ELK Stack configuration
input {
  jdbc {
    jdbc_driver_library => "/path/to/postgresql-42.2.5.jar"
    jdbc_driver_class => "org.postgresql.Driver"
    jdbc_connection_string => "jdbc:postgresql://localhost:5432/logs"
    jdbc_user => "logstash"
    jdbc_password => "password"
    statement => "SELECT * FROM log_events WHERE processed = false"
  }
}

output {
  elasticsearch {
    hosts => ["http://localhost:9200"]
    index => "logs-%{+YYYY.MM.dd}"
  }
}
                </pre>
            </div>
        </div>

        <div class="best-practice">
            <h4>Step 8: Implement Security Measures</h4>
            <p>Secure your microservices with authentication and authorization.</p>
            <div class="code-block">
                <pre>
# Spring Security configuration
http:
  security:
    enabled: true
    oauth2:
      resource:
        jwt:
          key-uri: http://localhost:8080/auth/realms/demo/protocol/openid-connect/certs
                </pre>
            </div>
        </div>
    </div>

    <div class="section" id="conclusion">
        <h2>üìö Conclusion</h2>
        <p>Microservices architecture offers significant benefits in terms of scalability, flexibility, and resilience. By following best practices and leveraging the right tools and patterns, you can successfully design, implement, and manage a microservices-based system.</p>
        
        <h3>Key Takeaways</h3>
        <ul>
            <li>Understand the principles and benefits of microservices architecture.</li>
            <li>Follow best practices for designing and implementing microservices.</li>
            <li>Utilize design patterns to solve common challenges in microservices.</li>
            <li>Choose the right technology stack for your microservices.</li>
            <li>Implement effective monitoring and observability.</li>
            <li>Plan and execute a successful migration from monolith to microservices.</li>
        </ul>
        
        <h3>Further Reading</h3>
        <ul>
            <li><a href="https://microservices.io/patterns/index.html" target="_blank">Microservices Patterns</a></li>
            <li><a href="https://martinfowler.com/articles/richardsonMaturityModel.html" target="_blank">Richardson Maturity Model</a></li>
            <li><a href="https://12factor.net/" target="_blank">The Twelve-Factor App</a></li>
            <li><a href="https://www.oreilly.com/library/view/microservices-up-and/9781491950340/" target="_blank">Microservices Up and Running</a></li>
        </ul>
    </div>

    <script>
        let demoRunning = false;
        let circuitBreakerState = 'closed';
        let metricsInterval;

        function startDemo() {
            console.log('Starting demo...');
            demoRunning = true;
            
            // Show and start traffic packets
            const packets = document.querySelectorAll('.traffic-packet');
            console.log('Found packets:', packets.length);
            
            packets.forEach((packet, index) => {
                packet.classList.add('active');
                packet.style.animationDelay = (index * 1) + 's';
                console.log(`Activated packet ${index + 1}`);
            });
            
            // Update button states
            const startButton = document.querySelector('button[onclick="startDemo()"]');
            if (startButton) {
                startButton.textContent = '‚ñ∂Ô∏è Running...';
                startButton.style.background = '#28a745';
            }
            
            // Start updating metrics
            updateMetrics();
        }

        function stopDemo() {
            console.log('Stopping demo...');
            demoRunning = false;
            
            // Hide and stop traffic packets
            const packets = document.querySelectorAll('.traffic-packet');
            packets.forEach(packet => {
                packet.classList.remove('active');
            });
            
            // Update button states
            const startButton = document.querySelector('button[onclick="startDemo()"]');
            if (startButton) {
                startButton.textContent = '‚ñ∂Ô∏è Start Demo';
                startButton.style.background = '#667eea';
            }
            
            // Clear metrics interval
            if (metricsInterval) {
                clearTimeout(metricsInterval);
                metricsInterval = null;
            }
        }

        function resetDemo() {
            console.log('Resetting demo...');
            stopDemo();
            
            // Reset all services
            document.querySelectorAll('.service-node').forEach(node => {
                node.classList.remove('active');
            });
            
            // Reset circuit breaker
            circuitBreakerState = 'closed';
            const stateElement = document.getElementById('circuitState');
            const descElement = document.getElementById('circuitDescription');
            if (stateElement) {
                stateElement.className = 'circuit-state circuit-closed';
                stateElement.textContent = 'Circuit: CLOSED';
            }
            if (descElement) {
                descElement.textContent = '‚úÖ Requests flowing normally';
            }
            
            // Reset metrics to initial values
            const responseTimeEl = document.getElementById('responseTime');
            if (responseTimeEl) {
                responseTimeEl.textContent = '245ms';
                document.getElementById('throughput').textContent = '1,250';
                document.getElementById('errorRate').textContent = '0.02%';
                document.getElementById('activeServices').textContent = '12';
            }
        }

        function highlightService(element, serviceName) {
            console.log(`Activating ${serviceName} service`);
            
            // Remove active class from all services
            document.querySelectorAll('.service-node').forEach(node => {
                node.classList.remove('active');
            });
            
            // Add active class to clicked service
            element.classList.add('active');
            
            // Update service info panel
            const serviceInfo = document.getElementById('serviceInfo');
            serviceInfo.classList.add('highlight');
            
            // Service descriptions
            const serviceDescriptions = {
                user: {
                    title: 'üë§ User Service Activated',
                    description: 'Handles user authentication, registration, profile management, and user sessions. This service manages all user-related operations independently.',
                    responsibilities: ['User Registration', 'Authentication', 'Profile Management', 'Session Handling']
                },
                product: {
                    title: 'üì¶ Product Service Activated', 
                    description: 'Manages product catalog, inventory, pricing, and product information. Handles all product-related queries and updates.',
                    responsibilities: ['Product Catalog', 'Inventory Management', 'Price Management', 'Product Search']
                },
                order: {
                    title: 'üõí Order Service Activated',
                    description: 'Processes orders, manages order lifecycle, and coordinates with other services for order fulfillment.',
                    responsibilities: ['Order Processing', 'Order Tracking', 'Order History', 'Order Validation']
                },
                payment: {
                    title: 'üí≥ Payment Service Activated',
                    description: 'Handles payment processing, transaction management, and financial operations securely.',
                    responsibilities: ['Payment Processing', 'Transaction Management', 'Refunds', 'Payment Security']
                }
            };
            
            const service = serviceDescriptions[serviceName];
            serviceInfo.innerHTML = `
                <h4 style="color: #28a745; margin: 0 0 10px 0;">${service.title}</h4>
                <p style="margin: 5px 0;">${service.description}</p>
                <div style="margin-top: 10px;">
                    <strong>Key Responsibilities:</strong>
                    <ul style="margin: 5px 0; padding-left: 20px;">
                        ${service.responsibilities.map(resp => `<li>${resp}</li>`).join('')}
                    </ul>
                </div>
                <small style="color: #666;">üí° In a real system, this service would have its own database, API endpoints, and can be scaled independently.</small>
            `;
            
            // Reset info panel after 10 seconds
            setTimeout(() => {
                serviceInfo.classList.remove('highlight');
                serviceInfo.innerHTML = `
                    <p><strong>üí° Click on any service above to see it activate!</strong></p>
                    <p>Each service represents an independent microservice that can be scaled and deployed separately.</p>
                `;
            }, 10000);
            
            console.log(`${serviceName} service is now active and highlighted`);
        }

        function toggleCircuitBreaker() {
            const stateElement = document.getElementById('circuitState');
            const descElement = document.getElementById('circuitDescription');
            
            if (!stateElement || !descElement) {
                console.log('Circuit breaker elements not found');
                return;
            }
            
            console.log(`Current circuit breaker state: ${circuitBreakerState}`);
            
            if (circuitBreakerState === 'closed') {
                circuitBreakerState = 'open';
                stateElement.className = 'circuit-state circuit-open';
                stateElement.textContent = 'Circuit: OPEN';
                descElement.textContent = '‚ö†Ô∏è Circuit breaker activated - blocking requests';
            } else if (circuitBreakerState === 'open') {
                circuitBreakerState = 'half-open';
                stateElement.className = 'circuit-state circuit-half-open';
                stateElement.textContent = 'Circuit: HALF-OPEN';
                descElement.textContent = 'üîç Testing with limited requests';
            } else {
                circuitBreakerState = 'closed';
                stateElement.className = 'circuit-state circuit-closed';
                stateElement.textContent = 'Circuit: CLOSED';
                descElement.textContent = '‚úÖ Requests flowing normally';
            }
        }

        function updateMetrics() {
            if (!demoRunning) return;
            
            const responseTimeEl = document.getElementById('responseTime');
            const throughputEl = document.getElementById('throughput');
            const errorRateEl = document.getElementById('errorRate');
            const activeServicesEl = document.getElementById('activeServices');
            
            if (responseTimeEl) { // Fixed the syntax error here
                // Simulate real-time metrics with some variation
                responseTimeEl.textContent = Math.floor(Math.random() * 100 + 200) + 'ms';
                throughputEl.textContent = Math.floor(Math.random() * 500 + 1000).toLocaleString();
                errorRateEl.textContent = (Math.random() * 0.1).toFixed(3) + '%';
                activeServicesEl.textContent = Math.floor(Math.random() * 3 + 10);
                
                console.log('Metrics updated');
            }
            
            // Schedule next update
            metricsInterval = setTimeout(updateMetrics, 2000);
        }

        // Test function to verify elements exist
        function testElements() {
            console.log('=== Element Test ===');
            console.log('Traffic packets:', document.querySelectorAll('.traffic-packet').length);
            console.log('Control buttons:', document.querySelectorAll('.control-btn').length);
            console.log('Service nodes:', document.querySelectorAll('.service-node').length);
            console.log('Metric elements:', document.querySelectorAll('.metric-value').length);
            
            // Test each button individually
            const buttons = document.querySelectorAll('.control-btn');
            buttons.forEach((btn, index) => {
                console.log(`Button ${index}: ${btn.textContent}`);
            });
        }

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM Content Loaded - Initializing...');
            
            // Run element test
            setTimeout(testElements, 100);
            
            // Add some initial delays to stagger service animations
            const services = document.querySelectorAll('.service-node');
            services.forEach((service, index) => {
                service.style.animationDelay = (index * 0.2) + 's';
            });
            
            // Add explicit event listeners as backup
            const startBtn = document.querySelector('button[onclick="startDemo()"]');
            const stopBtn = document.querySelector('button[onclick="stopDemo()"]');
            const resetBtn = document.querySelector('button[onclick="resetDemo()"]');
            
            if (startBtn) {
                startBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    console.log('Start button clicked via event listener');
                    startDemo();
                });
                console.log('Start button event listener added');
            }
            
            if (stopBtn) {
                stopBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    console.log('Stop button clicked via event listener');
                    stopDemo();
                });
                console.log('Stop button event listener added');
            }
            
            if (resetBtn) {
                resetBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    console.log('Reset button clicked via event listener');
                    resetDemo();
                });
                console.log('Reset button event listener added');
            }
            
            console.log('Initialization complete');
        });

        // Additional debugging
        window.addEventListener('load', function() {
            console.log('Window fully loaded');
            setTimeout(() => {
                console.log('Final element check:');
                testElements();
            }, 500);
        });

        // Global error handler
        window.addEventListener('error', function(e) {
            console.error('JavaScript Error:', e.error);
        });

        // Gateway Pattern Demo Functions
        let gatewayDemoRunning = false;

        function simulateRequest(requestType) {
            if (gatewayDemoRunning) return;
            
            gatewayDemoRunning = true;
            console.log(`Simulating ${requestType} request through API Gateway`);
            
            // Define request configurations
            const requestConfigs = {
                login: {
                    service: 'userServiceGW',
                    packet: 'userPacket',
                    arrow: 'toUserService',
                    color: '#007bff',
                    description: 'üîê User Authentication Request',
                    steps: ['authCheck', 'routingFeature', 'loggingFeature'],
                    features: ['authFeature', 'loggingFeature']
                },
                search: {
                    service: 'productServiceGW',
                    packet: 'productPacket', 
                    arrow: 'toProductService',
                    color: '#28a745',
                    description: 'üîç Product Search Request',
                    steps: ['rateLimit', 'routing', 'logging'],
                    features: ['rateLimitFeature', 'routingFeature', 'loggingFeature']
                },
                order: {
                    service: 'orderServiceGW',
                    packet: 'orderPacket',
                    arrow: 'toOrderService', 
                    color: '#ffc107',
                    description: 'üõí Order Creation Request',
                    steps: ['authCheck', 'routing', 'logging'],
                    features: ['authFeature', 'routingFeature', 'loggingFeature']
                },
                payment: {
                    service: 'paymentServiceGW',
                    packet: 'paymentPacket',
                    arrow: 'toPaymentService',
                    color: '#dc3545', 
                    description: 'üí≥ Payment Processing Request',
                    steps: ['authCheck', 'rateLimit', 'routing', 'logging'],
                    features: ['authFeature', 'rateLimitFeature', 'routingFeature', 'loggingFeature']
                }
            };
            
            const config = requestConfigs[requestType];
            if (!config) return;
            
            // Step 1: Activate client
            const client = document.getElementById('gatewayClient');
            const requestInfo = document.getElementById('requestInfo');
            client.classList.add('active');
            requestInfo.textContent = config.description;
            addLogEntry(`üì§ Client: Sending ${config.description}`, 'info');
            
            // Step 2: Animate request to gateway
            setTimeout(() => {
                const requestPacket = document.getElementById('requestPacket');
                const clientToGateway = document.getElementById('clientToGateway');
                const arrowLine = clientToGateway.querySelector('.arrow-line');
                const arrowHead = clientToGateway.querySelector('.arrow-head');
                
                requestPacket.classList.add('moving');
                arrowLine.classList.add('active');
                arrowHead.classList.add('active');
                
                addLogEntry(`üöÄ Request: Routing through API Gateway`, 'info');
            }, 500);
            
            // Step 3: Gateway processing
            setTimeout(() => {
                const gateway = document.getElementById('apiGateway');
                const gatewayStatus = document.getElementById('gatewayStatus');
                
                gateway.classList.add('processing');
                gatewayStatus.textContent = 'Processing...';
                
                // Activate gateway functions sequentially
                config.steps.forEach((step, index) => {
                    setTimeout(() => {
                        const functionEl = document.getElementById(step);
                        if (functionEl) {
                            functionEl.classList.add('active');
                            setTimeout(() => functionEl.classList.remove('active'), 800);
                        }
                    }, index * 300);
                });
                
                // Highlight relevant features
                config.features.forEach(feature => {
                    const featureEl = document.getElementById(feature);
                    if (featureEl) {
                        featureEl.classList.add('highlight');
                    }
                });
                
                addLogEntry(`üéØ Gateway: Authenticating, routing to ${config.service.replace('GW', '')}`, 'success');
            }, 1000);
            
            // Step 4: Route to specific service
            setTimeout(() => {
                const targetService = document.getElementById(config.service);
                const servicePacket = document.getElementById(config.packet);
                const serviceArrow = document.getElementById(config.arrow);
                
                if (targetService && servicePacket && serviceArrow) {
                    // Animate packet to service
                    servicePacket.classList.add('moving');
                    
                    // Activate service arrow
                    const arrowLine = serviceArrow.querySelector('.arrow-line');
                    const arrowHead = serviceArrow.querySelector('.arrow-head');
                    if (arrowLine && arrowHead) {
                        arrowLine.classList.add('active');
                        arrowHead.classList.add('active');
                    }
                    
                    // Activate target service
                    targetService.classList.add('active');
                    const serviceStatus = targetService.querySelector('.service-status');
                    if (serviceStatus) {
                        serviceStatus.textContent = 'Processing';
                    }
                    
                    addLogEntry(`üì® ${config.service.replace('GW', '')}: Processing request`, 'success');
                }
            }, 2000);
            
            // Step 5: Service response and cleanup
            setTimeout(() => {
                const targetService = document.getElementById(config.service);
                const serviceStatus = targetService ? targetService.querySelector('.service-status') : null;
                
                if (serviceStatus) {
                    serviceStatus.textContent = 'Complete';
                }
                
                addLogEntry(`‚úÖ ${config.service.replace('GW', '')}: Request completed successfully`, 'success');
                addLogEntry(`üì¨ Gateway: Returning response to client`, 'info');
            }, 3000);
            
            // Step 6: Reset everything
            setTimeout(() => {
                resetGatewayDemo();
                gatewayDemoRunning = false;
            }, 4000);
        }

        function resetGateway() {
            console.log('Resetting Gateway Demo');
            resetGatewayDemo();
            
            // Clear log
            const logContent = document.getElementById('requestLog');
            if (logContent) {
                logContent.innerHTML = '<div class="log-entry">System ready - Click buttons above to simulate requests</div>';
            }
        }

        function resetGatewayDemo() {
            // Reset client
            const client = document.getElementById('gatewayClient');
            const requestInfo = document.getElementById('requestInfo');
            if (client) client.classList.remove('active');
            if (requestInfo) requestInfo.textContent = 'Click a button to send request';
            
            // Reset gateway
            const gateway = document.getElementById('apiGateway');
            const gatewayStatus = document.getElementById('gatewayStatus');
            if (gateway) gateway.classList.remove('processing');
            if (gatewayStatus) gatewayStatus.textContent = 'Ready';
            
            // Reset all arrows and packets
            document.querySelectorAll('.arrow-line, .arrow-head').forEach(el => {
                el.classList.remove('active');
            });
            
            document.querySelectorAll('.request-packet, .service-packet').forEach(el => {
                el.classList.remove('moving');
            });
            
            // Reset all services
            document.querySelectorAll('.gateway-service').forEach(service => {
                service.classList.remove('active');
                const status = service.querySelector('.service-status');
                if (status) status.textContent = 'Idle';
            });
            
            // Reset all functions
            document.querySelectorAll('.function-item').forEach(func => {
                func.classList.remove('active');
            });
            
            // Reset all features
            document.querySelectorAll('.feature-card').forEach(feature => {
                feature.classList.remove('highlight');
            });
        }

        function addLogEntry(message, type = 'info') {
            const logContent = document.getElementById('requestLog');
            if (!logContent) return;
            
            const timestamp = new Date().toLocaleTimeString();
            const logEntry = document.createElement('div');
            logEntry.className = `log-entry ${type}`;
            logEntry.textContent = `[${timestamp}] ${message}`;
            
            logContent.appendChild(logEntry);
            logContent.scrollTop = logContent.scrollHeight;
            
            // Remove old entries if too many
            const entries = logContent.querySelectorAll('.log-entry');
            if (entries.length > 10) {
                entries[0].remove();
            }
        }
    </script>
</body>
</html>